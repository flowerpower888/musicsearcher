{"version":3,"sources":["hooks/http.hook.js","hooks/message.hook.js","pages/RegistrationPage.js","context/AuthContext.js","pages/AuthPage.js","actions/index.js","components/CreatePlaylist.js","components/Spinner.js","components/AlbumsList.js","pages/HomePage.js","components/PlaylistCard.js","components/Playlists.js","components/Playlist.js","pages/PlaylistsPage.js","pages/UsersPage.js","pages/AlbumPage.js","pages/TagsPage.js","components/Navbar.js","reducers/updatePlaylistsReducer.js","reducers/updateQueryReducer.js","reducers/updateTagReducer.js","reducers/index.js","index.js","App.js","hooks/auth.hook.js","routes.js"],"names":["useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","useMessage","text","window","M","toast","html","RegistrationPage","username","email","password","form","setForm","useEffect","updateTextFields","changeHandler","event","target","name","value","registerHandler","className","style","marginBottom","textAlign","marginTop","id","type","onChange","htmlFor","paddingTop","to","marginRight","onClick","disabled","noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","AuthPage","auth","useContext","history","useHistory","console","log","queryString","parse","location","search","status","setTimeout","push","loginHandler","href","updatePlaylists","playlists","payload","updateQuery","query","CreatePlaylist","album","playlistName","setPlaylistName","dispatch","useDispatch","e","axios","post","localStorage","getItem","then","res","Spinner","borderColor","AlbumsList","albums","playlistsNames","useSelector","state","Object","keys","currentAlbum","setCurrentAlbum","Dropdown","init","document","querySelectorAll","constrainWidth","Modal","endingTop","length","map","image","key","src","alt","onMouseEnter","artist","split","join","data-target","preventDefault","addToPlaylist","tabIndex","HomePage","searchQuery","tags","setAlbums","process","lastFmAlbums","results","albummatches","topalbums","filter","i","indexOf","values","playlist","toptags","tag","pathname","textTransform","PlaylistCard","useLocation","imageUrls","setImageUrls","artists","setArtists","styles","height","background","playlistCover","stopPropagation","line","element","truncateText","Playlists","role","aria-label","Playlist","props","match","params","albumName","deleteFromPlaylist","renderAlbums","PlaylistsPage","exact","path","component","UsersPage","renderList","users","currentUser","_id","setState","prevState","allChecked","user","isChecked","every","find","undefined","checked","handleClick","Date","registrationDate","toLocaleString","lastLoginDate","width","itemName","deleteUser","forEach","delete","x","removeItem","reload","blockUser","some","unblockUser","get","catch","this","marginLeft","Component","AlbumPage","setAlbum","lastFmAlbum","test","title","description","pages","extract","goBack","TagsPage","Navbar","logoutHandler","sidenav","querySelector","Sidenav","edge","inDuration","autocomplete","Autocomplete","position","left","updatePlaylistsReducer","action","updateQueryReducer","updateTagReducer","Set","combineReducers","store","createStore","allReducer","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","setToken","setUserId","setEmail","setUsername","jwtToken","setItem","useAuth","routes","useRoutes","err","Provider","getElementById"],"mappings":"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","file":"static/js/main.5b435547.chunk.js","sourcesContent":["import {useState, useCallback} from 'react';\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(null)\r\n\r\n  const request = useCallback(\r\n    async (url, method = 'GET', body = 'null', headers = {}) => {\r\n    setLoading(true)\r\n    try {\r\n      if (body) {\r\n        body = JSON.stringify(body)\r\n        headers['Content-Type'] = 'application/json'\r\n      }\r\n\r\n      const response = await fetch(url, {method, body, headers})\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || 'something went wrong')\r\n      }\r\n\r\n      setLoading(false)\r\n\r\n      return data\r\n    } catch (e) {\r\n      setLoading(false)\r\n      setError(e.message)\r\n      throw e\r\n    }\r\n  }, [])\r\n\r\n  const clearError = useCallback(() => setError(null), [])\r\n\r\n  return { loading, request, error, clearError }\r\n}\r\n","import { useCallback } from 'react';\r\n\r\nexport const useMessage = () => {\r\n  return useCallback(text => {\r\n    if (window.M && text) {\r\n      window.M.toast({ html: text })\r\n    }\r\n  }, [])\r\n}\r\n","import React, {useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {useHttp} from '../hooks/http.hook';\r\nimport {useMessage} from '../hooks/message.hook';\r\n\r\n\r\nexport const RegistrationPage = () => {\r\n  const message = useMessage()\r\n  const {loading, request, error, clearError} = useHttp()\r\n  const [form, setForm] = useState({\r\n    username: '', email: '', password: ''\r\n  })\r\n\r\n  useEffect(() => {\r\n    message(error)\r\n    clearError()\r\n  }, [error, message, clearError])\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, [])\r\n\r\n  const changeHandler = event => {\r\n    setForm({ ...form, [event.target.name]: event.target.value })\r\n  }\r\n\r\n  const registerHandler = async () => {\r\n    try {\r\n      const data = await request('/api/auth/register', 'POST', {...form})\r\n      message(data.message)\r\n    } catch (e) {}\r\n  }\r\n\r\n  return (\r\n    <div className='row' style={{ marginBottom: '0' }}>\r\n      <div className=\"col s10 m6 offset-s1 offset-m3\" style={{ textAlign: 'center', marginTop: '2em' }}>\r\n        <div className=\"card\">\r\n          <div className=\"card-content\">\r\n            <span className=\"card-title\">\r\n              <h5>Sign Up</h5>\r\n            </span>\r\n            <div>\r\n\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">account_circle</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"username\"\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"username\">Username</label>\r\n              </div>\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">email</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"email\"\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"email\">Email</label>\r\n              </div>\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">lock</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"password\">Password</label>\r\n                <div style={{paddingTop: '1.5em'}}>\r\n                  <Link to=\"/signin\" className=\"pink-text\">Sign In</Link>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          <div className=\"card-action\">\r\n            <button\r\n              className=\"btn pink darken-2\"\r\n              style={{marginRight: '10px'}}\r\n              onClick={registerHandler}\r\n              disabled={loading}\r\n            >\r\n              Sign Up\r\n            </button>\r\n            {/* <button\r\n              className=\"btn pink lighten-3\"\r\n              onClick={registerHandler}\r\n              disabled={loading}\r\n            >\r\n              Register\r\n            </button> */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import {createContext} from 'react';\r\n\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n  token: null,\r\n  userId: null,\r\n  email: null,\r\n  username: null,\r\n  login: noop,\r\n  logout: noop,\r\n  isAuthenticated: false\r\n})\r\n","import React, {useState, useEffect, useContext} from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useHttp } from '../hooks/http.hook';\r\nimport { useMessage } from '../hooks/message.hook';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport queryString from \"query-string\";\r\n\r\n\r\nexport const AuthPage = () => {\r\n  const auth = useContext(AuthContext)\r\n  const history = useHistory()\r\n  const message = useMessage()\r\n  const {loading, request, error, clearError} = useHttp()\r\n  const [form, setForm] = useState({\r\n    email: '', password: ''\r\n  })\r\n\r\n  useEffect(() => {\r\n    console.log();\r\n    let query = queryString.parse(window.location.search);\r\n    if (query.status === 'Blocked') {\r\n      message('User blocked')\r\n      clearError()\r\n      setTimeout(() => history.push('/signin'), 2500)\r\n    }\r\n\r\n    message(error)\r\n    clearError()\r\n  }, [error, message, clearError, history])\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, [])\r\n\r\n  const changeHandler = event => {\r\n    setForm({ ...form, [event.target.name]: event.target.value })\r\n  }\r\n\r\n  const loginHandler = async () => {\r\n    try {\r\n      const data = await request('/api/auth/login', 'POST', {...form})\r\n      auth.login(data.token, data.userId, data.email, data.username)\r\n    } catch (e) {}\r\n  }\r\n\r\n\r\n  return (\r\n    <div className='row' style={{ marginBottom: '0' }}>\r\n      <div className=\"col s10 m6 offset-s1 offset-m3\" style={{ textAlign: 'center', marginTop: '2em' }}>\r\n        <div className=\"card\">\r\n          <div className=\"card-content\">\r\n            <span className=\"card-title\">\r\n              <h5>Sign In</h5>\r\n            </span>\r\n            <div>\r\n\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">email</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"email\"\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"email\">Email</label>\r\n              </div>\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">lock</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"password\">Password</label>\r\n\r\n                <div style={{paddingTop: '1.5em'}}>\r\n                  <a href={`${process.env.NODE_ENV === \"production\" ? \"https://musicsearcher-test.herokuapp.com\" : \"http://localhost:5000\"}/api/auth/google`} className=\"waves-effect waves-light btn deep-orange accent-4\">Sign in with Google</a>\r\n                </div>\r\n                <div style={{paddingTop: '.5em'}}>\r\n                  <a href={`${process.env.NODE_ENV === \"production\" ? \"https://musicsearcher-test.herokuapp.com\" : \"http://localhost:5000\"}/api/auth/spotify`} className=\"waves-effect waves-light btn green accent-4\">Sign in with Spotify</a>\r\n                </div>\r\n                <p style={{paddingTop: '1.5em'}}>\r\n                  Don't have an account?\r\n                </p>\r\n                <div>\r\n                  <Link to=\"/signup\" className=\"pink-text\">Sign Up</Link>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          <div className=\"card-action\">\r\n            <button\r\n              className=\"btn pink darken-2\"\r\n              style={{marginRight: '10px'}}\r\n              onClick={loginHandler}\r\n              disabled={loading}\r\n            >\r\n              Sign In\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export const updatePlaylists = (playlists) => {\r\n  return {\r\n    type: 'UPDATE_PLAYLISTS',\r\n    payload: playlists\r\n  }\r\n}\r\n\r\nexport const updateQuery = (query) => {\r\n  return {\r\n    type: 'UPDATE_QUERY',\r\n    payload: query\r\n  }\r\n}\r\n\r\nexport const updateTag = (tag) => {\r\n  return {\r\n    type: 'UPDATE_TAG',\r\n    payload: tag\r\n  }\r\n}\r\n// export const addAlbum = (playlist) => {\r\n//   return {\r\n//     type: 'ADD',\r\n//     payload: playlist\r\n//   }\r\n// }\r\n//\r\n// export const removeAlbum = (playlist) => {\r\n//   return {\r\n//     type: 'REMOVE',\r\n//     payload: playlist\r\n//   }\r\n// }\r\n","import React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport { useDispatch } from 'react-redux';\r\nimport { updatePlaylists } from '../actions';\r\n\r\n\r\nexport const CreatePlaylist = ({album}) => {\r\n  const [playlistName, setPlaylistName] = useState()\r\n  const dispatch = useDispatch()\r\n\r\n  const changeHandler = e => {\r\n    setPlaylistName(e.target.value)\r\n  }\r\n\r\n  const createPlaylist = () => {\r\n    axios.post('/api/users/' + JSON.parse(localStorage.getItem('userData')).userId + '/playlists/create/', {playlistName, album})\r\n    .then(res => dispatch(updatePlaylists(res.data)))\r\n  }\r\n\r\n  return (<div>\r\n    <div id=\"modal1\" className=\"modal\">\r\n      <div className=\"modal-content\">\r\n        <input name=\"playlistName\" className=\"pink-input\" type=\"text\" onChange={changeHandler}/>\r\n      </div>\r\n      <div className=\"modal-footer\">\r\n        <button className=\"btn pink darken-2 modal-close\" onClick={createPlaylist}>\r\n          OK\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>)\r\n};\r\n","import React from 'react';\r\n\r\nexport const Spinner = () => {\r\n  return (\r\n    <div className=\"center-align\" style={{ marginTop: '12em' }}>\r\n      <div className=\"preloader-wrapper big active\">\r\n        <div className=\"spinner-layer\" style={{ borderColor: \"#E91E63\" }}>\r\n          <div className=\"circle-clipper left\">\r\n            <div className=\"circle\"></div>\r\n          </div><div className=\"gap-patch\">\r\n            <div className=\"circle\"></div>\r\n          </div><div className=\"circle-clipper right\">\r\n            <div className=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","import React, {useState, useEffect} from 'react';\r\nimport {CreatePlaylist} from './CreatePlaylist';\r\nimport {Spinner} from './Spinner';\r\nimport M from 'materialize-css';\r\nimport axios from 'axios';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {updatePlaylists} from '../actions';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n\r\nexport const AlbumsList = ({ albums }) => {\r\n  const playlistsNames = useSelector(state => Object.keys(state.playlists))\r\n\r\n  const history = useHistory()\r\n  const dispatch = useDispatch()\r\n  const [currentAlbum, setCurrentAlbum] = useState()\r\n\r\n  useEffect(() => {\r\n    M.Dropdown.init(document.querySelectorAll('.dropdown-trigger'), {constrainWidth: false});\r\n    M.Modal.init(document.querySelectorAll('.modal'), {endingTop: \"30%\"});\r\n  })\r\n\r\n  const addToPlaylist = (playlistName) => {\r\n    axios.post('/api/users/' + JSON.parse(localStorage.getItem('userData')).userId + '/playlists/' + playlistName + '/update/', {playlistName, currentAlbum}).then(response => {\r\n      dispatch(updatePlaylists(response.data))\r\n    })\r\n  }\r\n\r\n  return albums.length\r\n    ? (<div className='items-wrapper'>\r\n      {\r\n        albums.map(album => {\r\n          return album.image[0]['#text'] && (\r\n            <div className=\"card album-card\" key={album.name + ' ' + album.url}>\r\n              <div className=\"card-image\">\r\n                <img src={album.image[2]['#text']} alt=\"\"\r\n                onMouseEnter={() => {setCurrentAlbum(album)}}\r\n                onClick={() => {\r\n                  history.push(`/albums/${(album.artist.name || album.artist).split(' ').join(\"+\") + '/' + album.name.split(' ').join(\"+\")}`)\r\n                }}\r\n              />\r\n              </div>\r\n              <div className=\"card-content\">\r\n                <h5>{album.artist.name || album.artist}</h5>\r\n                <p>{album.name}</p>\r\n              </div>\r\n              {\r\n                localStorage.getItem('userData') && <div>\r\n                    <div data-target='dropdown1' className=\"dropdown-trigger album-button material-icons\"></div>\r\n\r\n                    <ul id='dropdown1' className='dropdown-content'>\r\n                      {\r\n                        playlistsNames.map(playlistName => <li key={playlistName}>\r\n                          <a onClick={(e) => {\r\n                              e.preventDefault()\r\n                              addToPlaylist(playlistName)\r\n                            }} href=\"\">{playlistName}</a>\r\n                        </li>)\r\n                      }\r\n                      <li className=\"divider\" tabIndex=\"-1\"></li>\r\n                      <li>\r\n                        <a className=\"modal-trigger\" href=\"#modal1\">\r\n                          <i className=\"material-icons\">add</i>new playlist</a>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n              }\r\n            </div>\r\n          )\r\n        })\r\n      }\r\n      <CreatePlaylist album={currentAlbum}/>\r\n    </div>)\r\n    : <Spinner/>\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updateTag } from '../actions';\r\nimport { AlbumsList } from '../components/AlbumsList';\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport const HomePage = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const searchQuery = useSelector(state => state.query)\r\n  const tags = useSelector(state => state.tags)\r\n  const playlists = useSelector(state => state.playlists)\r\n\r\n  const [albums, setAlbums] = useState({})\r\n\r\n  useEffect(() => {\r\n    if (searchQuery.length) {\r\n      fetch(`https://ws.audioscrobbler.com/2.0/?method=album.search&album=${searchQuery}&api_key=${process.env.REACT_APP_API_KEY}&limit=10&format=json`).then(res => res.json()).then(data => {\r\n        let lastFmAlbums = data.results.albummatches.album;\r\n        setAlbums(lastFmAlbums)\r\n      })\r\n    } else {\r\n      fetch(`https://ws.audioscrobbler.com/2.0/?method=user.gettopalbums&user=${process.env.REACT_APP_LASTFM_USERNAME}&api_key=${process.env.REACT_APP_API_KEY}&period=6month&format=json`).then(res => res.json()).then(data => {\r\n        let lastFmAlbums = data.topalbums?.album;\r\n        setAlbums(lastFmAlbums.filter((album, i) => i === lastFmAlbums.indexOf(album)))\r\n      })\r\n    }\r\n\r\n\r\n    Object.values(playlists).map(playlist => {\r\n      playlist.map(album => {\r\n        fetch(`https://ws.audioscrobbler.com/2.0/?method=album.gettoptags&artist=${album.artist.name || album.artist}&album=${album.name}&api_key=${process.env.REACT_APP_API_KEY}&format=json`).then(res => res.json()).then(data => {\r\n          if (data.toptags.tag[0]) {\r\n            dispatch(updateTag(data.toptags.tag[0].name))\r\n          }\r\n        })\r\n        return album\r\n      })\r\n      return playlist\r\n    })\r\n  }, [searchQuery, dispatch, playlists]);\r\n\r\n\r\n  return (\r\n    <div>\r\n      {\r\n        localStorage.getItem('userData') && <div className=\"tags\">\r\n                <h4>Top tags</h4>\r\n                {\r\n                  tags.length ?\r\n                  tags.map(tag =>\r\n                     <Link to={{ pathname: `/albums/tags/${tag}` }} key={tag} style={{ textTransform: \"none\" }} className=\"btn-small btn-flat\">{tag}</Link>)\r\n                  : <p>here will be your top tags</p>\r\n                }\r\n              </div>\r\n      }\r\n      <AlbumsList albums={albums} playlists={playlists} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport TextTruncate from 'react-text-truncate';\r\nimport axios from 'axios';\r\nimport { useDispatch } from 'react-redux';\r\nimport { updatePlaylists } from '../actions';\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\n\r\n\r\nexport const PlaylistCard = ({ albums, playlistName }) => {\r\n\r\n  const dispatch = useDispatch()\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n  const [imageUrls, setImageUrls] = useState(\"\")\r\n  const [artists, setArtists] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    setArtists(\r\n      albums.map(album => album.artist.name || album.artist).join(\", \")\r\n    )\r\n    if (!albums.length) {\r\n      setImageUrls(\"#ccc\")\r\n    } else if (albums.length < 4) {\r\n      setImageUrls(`url(${albums[0].image[2]['#text']})`)\r\n    } else {\r\n      setImageUrls(`url(${albums[0].image[2]['#text']}) left top no-repeat, url(${albums[1].image[2]['#text']}) right top no-repeat, url(${albums[2].image[2]['#text']}) left bottom no-repeat, url(${albums[3].image[2]['#text']}) right bottom no-repeat`)\r\n    }\r\n  }, [albums])\r\n\r\n  const styles = {\r\n    \"playlistCover\": {\r\n      height: \"20em\",\r\n      background: `${imageUrls}`\r\n    }\r\n  }\r\n\r\n  const deletePlaylist = (e) => {\r\n    e.stopPropagation()\r\n    axios.post('/api/users/' + JSON.parse(localStorage.getItem('userData')).userId + '/playlists/' + playlistName + '/delete/').then(response => {\r\n      dispatch(updatePlaylists(response.data))\r\n    })\r\n  }\r\n\r\n  const openPlaylist = () => history.push(`${location.pathname}/${playlistName}`)\r\n\r\n  return albums && (\r\n    <div className=\"card playlist-card\">\r\n      <div className=\"card-image\" onClick={openPlaylist}>\r\n        {\r\n          !albums.length ? <div className=\"playlist-cover\" style={styles.playlistCover}></div>\r\n          : albums.length > 3\r\n          ? <div className=\"playlist-cover\" style={styles.playlistCover}></div>\r\n          : <img src={albums[albums.length - 1].image[2]['#text']} alt=\"\" style={{ height: '280px' }}/>\r\n        }\r\n        <span className=\"card-title playlist-title\">\r\n          {playlistName}\r\n          <span className=\"playlist-actions\">\r\n            <i className=\"delete-playlist material-icons\" onClick={deletePlaylist}>delete</i>\r\n          </span>\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"card-content\">\r\n        <TextTruncate line={2} element=\"p\" truncateText=\"…\" text={artists}/>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","import React from 'react';\r\nimport { Spinner } from './Spinner';\r\nimport { PlaylistCard } from './PlaylistCard';\r\nimport { useSelector } from 'react-redux';\r\n\r\n\r\nexport const Playlists = () => {\r\n  const playlists = useSelector(state => state.playlists)\r\n\r\n  if (!playlists) {\r\n    return <h5 style={{ textAlign: \"center\", marginTop: \"4em\"}}>Nothing here yet<span role=\"img\" aria-label=\"rat\">🐀</span></h5>\r\n  } else if (!Object.keys(playlists).length) {\r\n    return <Spinner/>\r\n  }\r\n\r\n  return (\r\n    <div className=\"items-wrapper\">\r\n      {\r\n    Object.keys(playlists).map(name => <PlaylistCard key={name} albums={playlists[name]} playlistName={name} />)\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { Spinner } from './Spinner';\r\nimport axios from 'axios';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updatePlaylists } from '../actions';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n\r\nexport const Playlist = (props) => {\r\n  const history = useHistory()\r\n  const dispatch = useDispatch()\r\n  const albums = useSelector(state => state.playlists[props.match.params.playlistName])\r\n\r\n  const deleteFromPlaylist = (albumName, playlistName) => {\r\n    axios.post('/api/users/' + JSON.parse(localStorage.getItem('userData')).userId + '/playlists/' + playlistName + '/deleteAlbum/', [playlistName, albumName]).then(response => {\r\n      dispatch(updatePlaylists(response.data))\r\n    })\r\n  }\r\n\r\n  const renderAlbums = (albums, playlistName) => albums.map(album => {\r\n    return (<div className=\"card album-card\" key={album.name}>\r\n      <div className=\"card-image\">\r\n        <img\r\n          src={album.image[2]['#text']}\r\n          alt=\"\"\r\n          onClick={() => {\r\n            history.push(`/albums/${(album.artist.name || album.artist).split(' ').join(\"+\") + '/' + album.name.split(' ').join(\"+\")}`)\r\n          }}\r\n        />\r\n      </div>\r\n      <div className=\"card-content\">\r\n        <h5>{album.artist.name || album.name}</h5>\r\n        <p>{album.name}</p>\r\n      </div>\r\n      <div className=\"album-button material-icons added\" onClick={() => deleteFromPlaylist(album.name, playlistName)}></div>\r\n    </div>)\r\n  })\r\n\r\n  if (!albums) {\r\n    return <Spinner/>\r\n  }\r\n\r\n  return (<ul className=\"collection\">\r\n    <li className=\"collection-item active\">\r\n      <button className=\"btn-floating btn-flat grey darken-4\"><i className=\"material-icons\" onClick={() => history.push(`/${props.match.params.id}/playlists`)}>keyboard_arrow_left</i></button>\r\n      <h5>{props.match.params.playlistName}</h5>\r\n    </li>\r\n\r\n    <li className=\"collection-item\">\r\n      <div className=\"items-wrapper\">\r\n        {renderAlbums(albums, props.match.params.playlistName)}\r\n      </div>\r\n    </li>\r\n  </ul>)\r\n}\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport { Playlists } from '../components/Playlists';\r\nimport { Playlist } from '../components/Playlist';\r\n\r\n\r\nexport const PlaylistsPage = () => {\r\n  return (\r\n  <div className=\"row\" style={{ marginTop: \"1.5em\" }}>\r\n      <Route exact path='/:id/playlists'>\r\n      <h4>Playlists</h4>\r\n        <Playlists />\r\n      </Route>\r\n\r\n      <Route path='/:id/playlists/:playlistName' component={Playlist} />\r\n  </div>\r\n  )\r\n}\r\n","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\n\r\nexport class UsersPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      allChecked: false,\r\n      users: []\r\n     };\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    axios.get('/api/users')\r\n      .then(response => {\r\n        this.setState({\r\n          users: response.data.map(user => ({ ...user, isChecked: false }))\r\n        })\r\n      })\r\n      .catch((error) => { console.log(error) })\r\n  }\r\n\r\n  renderList = () => {\r\n    return this.state.users.map(currentUser => (\r\n      <tr\r\n        key={currentUser._id}\r\n        onClick={(e) => {\r\n          let id = currentUser._id;\r\n\r\n          this.setState(prevState => {\r\n            let { users, allChecked } = prevState;\r\n              users = users.map(user =>\r\n                user._id === id ? { ...user, isChecked: !user.isChecked } : user\r\n              );\r\n              allChecked = users.every(user => user.isChecked);\r\n              return { users, allChecked };\r\n            })\r\n          }\r\n        }\r\n        className={this.state.users.find(user => user._id === currentUser._id).isChecked ? 'checked' : undefined}\r\n      >\r\n        <td>\r\n\r\n          <label>\r\n            <input\r\n              type=\"checkbox\"\r\n              key={currentUser._id}\r\n              name={currentUser.username}\r\n              value={currentUser.username}\r\n              checked={currentUser.isChecked}\r\n              onChange={this.handleClick}\r\n              className=\"filled-in\"\r\n            />\r\n            <span></span>\r\n          </label>\r\n\r\n        </td>\r\n\r\n        <td>{currentUser.username}</td>\r\n        <td>{currentUser.email}</td>\r\n        <td>{currentUser._id}</td>\r\n        <td>{new Date(currentUser.registrationDate).toLocaleString()}</td>\r\n        <td>{new Date(currentUser.lastLoginDate).toLocaleString()}</td>\r\n        <td style={{width: '70px'}} className={currentUser.status}>{currentUser.status}</td>\r\n\r\n      </tr>\r\n    ));\r\n  };\r\n\r\n  handleClick = (e) => {\r\n    let itemName = e.target.name;\r\n    let checked = e.target.checked;\r\n\r\n    this.setState(prevState => {\r\n      let { users, allChecked } = prevState;\r\n      if (itemName === \"checkAll\") {\r\n        allChecked = checked;\r\n        users = users.map(user => ({ ...user, isChecked: checked }));\r\n      } else {\r\n        users = users.map(user =>\r\n          user.username === itemName ? { ...user, isChecked: !user.isChecked } : user\r\n        );\r\n        allChecked = users.every(user => user.isChecked);\r\n      }\r\n      return { users, allChecked };\r\n    });\r\n  };\r\n\r\n  deleteUser = () => {\r\n    let checked = this.state.users.filter(user => user.isChecked)\r\n    checked.forEach(user => {\r\n      axios.delete('/api/users/' + user._id)\r\n        .then(response => { console.log(response.data)})\r\n        .then(() => {\r\n          this.setState(prevState => {\r\n             return { users: prevState.users.filter(x => x._id !== user._id) }\r\n          })\r\n          if (JSON.parse(localStorage.getItem('userData')).userId === user._id) {\r\n            localStorage.removeItem('userData');\r\n            window.location.reload();\r\n          }\r\n        })\r\n    })\r\n  }\r\n\r\n  blockUser = () => {\r\n    let checked = this.state.users.filter(user => user.isChecked);\r\n    checked.forEach(user => {\r\n      user.status = 'Blocked'\r\n      this.setState(prevState => {\r\n        return { users: prevState.users.map(x => ({ ...x, user })) }\r\n      })\r\n      axios.post('/api/users/' + user._id + '/update/', user).then(res => console.log(res.data))\r\n    });\r\n\r\n    if (checked.some(user => JSON.parse(localStorage.getItem('userData')).userId === user._id)) {\r\n      localStorage.removeItem('userData');\r\n      window.location.reload();\r\n    }\r\n  }\r\n\r\n  unblockUser = () => {\r\n    let checked = this.state.users.filter(user => user.isChecked);\r\n    checked.forEach(user => {\r\n      user.status = 'Active'\r\n      this.setState(prevState => {\r\n        return { users: prevState.users.map(x => ({ ...x, user })) }\r\n      })\r\n      axios.post('/api/users/' + user._id + '/update/', user).then(res => console.log(res.data))\r\n    });\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h4>Users</h4>\r\n        <table className=\"table\">\r\n          <thead className=\"thead-light\">\r\n            <tr>\r\n              <th>\r\n                <label htmlFor=\"checkAll\">\r\n                  <input\r\n                    id=\"checkAll\"\r\n                    name=\"checkAll\"\r\n                    type=\"checkbox\"\r\n                    className=\"filled-in\"\r\n                    onChange={this.handleClick}\r\n                    checked={this.state.allChecked}\r\n                  />\r\n                  <span></span>\r\n                </label>\r\n              </th>\r\n              <th>Username</th>\r\n              <th>Email</th>\r\n              <th>ID</th>\r\n              <th>Registration Date</th>\r\n              <th>Last Login Date</th>\r\n              <th>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            { this.renderList() }\r\n          </tbody>\r\n        </table>\r\n\r\n        <p>\r\n            <button\r\n              onClick={this.deleteUser}\r\n              className=\"btn pink darken-2 waves-effect waves-light\"\r\n            >\r\n                Delete\r\n               <i className=\"material-icons-outlined right\">delete</i>\r\n            </button>\r\n            <button\r\n              onClick={this.blockUser}\r\n              className=\"btn pink darken-2 waves-effect waves-light\"\r\n              style={{\r\n                  marginLeft: '1em',\r\n                  marginRight: '1em'\r\n              }}\r\n            >\r\n                Block\r\n               <i className=\"material-icons-outlined right\">lock</i>\r\n            </button>\r\n            <button\r\n              onClick={this.unblockUser}\r\n              className=\"btn pink darken-2 waves-effect waves-light\"\r\n            >\r\n                Unblock\r\n               <i className=\"material-icons right\">lock_open</i>\r\n            </button>\r\n        </p>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useHistory, Link } from 'react-router-dom'\r\nimport {Spinner} from '../components/Spinner';\r\n\r\n\r\nexport const AlbumPage = (props) => {\r\n  const [album, setAlbum] = useState({})\r\n  const history = useHistory()\r\n\r\n  useEffect(() => {\r\n    const { match: { params } } = props;\r\n\r\n    let lastFmAlbum;\r\n    fetch(`https://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=${process.env.REACT_APP_API_KEY}&artist=${params.artist}&album=${params.albumName}&lang=en&format=json`).then(res => res.json()).then(data => {\r\n      lastFmAlbum = data.album\r\n      setAlbum(lastFmAlbum)\r\n    })\r\n\r\n    if (/[a-z]/i.test(params.albumName)) {\r\n      fetch(`https://en.wikipedia.org/w/api.php?origin=*&action=query&list=search&srwhat=text&srsearch=${params.albumName + '+' + params.artist}&format=json`).then(res => res.json()).then(data => {\r\n        if (data.query.search.length) {\r\n          fetch(`https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=extracts&exintro&explaintext&titles=${data.query.search[0].title}&format=json`).then(res => res.json()).then(data => {\r\n            setAlbum({...lastFmAlbum, description: Object.values(data.query.pages)[0].extract})\r\n          })\r\n        }\r\n      })\r\n    } else {\r\n      fetch(`https://ru.wikipedia.org/w/api.php?origin=*&action=query&list=search&srwhat=text&srsearch=${params.albumName + '+' + params.artist}&format=json`).then(res => res.json()).then(data => {\r\n        if (data.query.search.length) {\r\n          fetch(`https://ru.wikipedia.org/w/api.php?origin=*&action=query&prop=extracts&exintro&explaintext&titles=${data.query.search[0].title}&format=json`).then(res => res.json()).then(data => {\r\n            setAlbum({...lastFmAlbum, description: Object.values(data.query.pages)[0].extract})\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }, [props]);\r\n\r\nconsole.log(album.description);\r\n\r\n  return album.image && album.description && Object.values(album).length !== 0 ? (\r\n    <div className=\"row album-details\" style={{ marginTop: \"1.5em\" }}>\r\n      <div className=\"col s2 m1 go-back\">\r\n        <button className=\"btn-floating btn-flat grey darken-4\"><i className=\"material-icons\" onClick={() => history.goBack()}>keyboard_arrow_left</i></button>\r\n      </div>\r\n\r\n      <div className=\"col s12 m5\">\r\n        <img src={album.image[5]['#text']} alt=\"\" />\r\n\r\n        <div className=\"tags\">\r\n          {\r\n            album.tags.tag.map(tag =>\r\n               <Link to={{ pathname: `/albums/tags/${tag.name}` }} key={tag.name} style={{ textTransform: \"none\" }} className=\"btn-small btn-flat\">{tag.name}</Link>)\r\n          }\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"album-description col s12 m6\">\r\n        <h5>{album.artist}</h5>\r\n        <h4>{album.name}</h4>\r\n        <p>{album.description}</p>\r\n      </div>\r\n    </div>\r\n  ) : <Spinner />\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { AlbumsList } from '../components/AlbumsList';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n\r\nexport const TagsPage = (props) => {\r\n  const [albums, setAlbums] = useState({})\r\n  const history = useHistory()\r\n\r\n  useEffect(() => {\r\n    const { match: { params } } = props;\r\n\r\n    fetch(`https://ws.audioscrobbler.com/2.0/?method=tag.gettopalbums&tag=${params.tag}&api_key=${process.env.REACT_APP_API_KEY}&limit=20&format=json`).then(res => res.json()).then(data => {\r\n      let lastFmAlbums = data.albums.album;\r\n      setAlbums(lastFmAlbums.filter((album, i) => i === lastFmAlbums.indexOf(album)))\r\n      })\r\n  }, [props])\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col s2 m1 go-back\">\r\n        <button className=\"btn-floating btn-flat grey darken-4\"><i className=\"material-icons\" onClick={() => history.goBack()}>keyboard_arrow_left</i></button>\r\n      </div>\r\n      <h4>Tags: <span className=\"tag\">{props.match.params.tag}</span></h4>\r\n      <AlbumsList albums={albums} />\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useContext } from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport M from \"materialize-css/dist/js/materialize.min.js\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { updateQuery } from '../actions';\r\n\r\n\r\nexport const Navbar = ({ isAuthenticated, email, username, userId }) => {\r\n  const history = useHistory()\r\n  const dispatch = useDispatch()\r\n  const auth = useContext(AuthContext)\r\n\r\n  const logoutHandler = (event) => {\r\n    event.preventDefault()\r\n    auth.logout()\r\n    history.push('/')\r\n  }\r\n\r\n  const search = (e) => {\r\n    history.push('/home')\r\n    dispatch(updateQuery(e.target.value))\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    const sidenav = document.querySelector(\".sidenav\");\r\n    M.Sidenav.init(sidenav, {\r\n        edge: \"left\",\r\n        inDuration: 250,\r\n    });\r\n    const autocomplete = document.querySelector(\".autocomplete\");\r\n    M.Autocomplete.init(autocomplete, {\r\n      data: {},\r\n    });\r\n  })\r\n\r\n  return isAuthenticated ? (\r\n    <div>\r\n      <div className=\"navbar-fixed\">\r\n        <nav className=\"grey darken-4\">\r\n          <div className=\"container nav-wrapper\">\r\n            <NavLink to=\"#\" data-target=\"slide-out\" className=\"sidenav-trigger show-on-large\"><i className=\"material-icons\">menu</i></NavLink>\r\n            <NavLink to='/home' className=\"brand-logo left hide-on-small-only\" onClick={() => dispatch(updateQuery(\"\"))}>\r\n            MusicSearcher\r\n          </NavLink>\r\n              <ul id=\"nav-mobile\" className=\"right\">\r\n                <li className=\"search\">\r\n                  <div className=\"input-field\">\r\n                      <i className=\"material-icons prefix\">search</i>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"autocomplete-input\" className=\"autocomplete\"\r\n                        onChange={search}\r\n                      />\r\n                  </div>\r\n                </li>\r\n                <li>\r\n                  <NavLink to='/' onClick={logoutHandler}><i className=\"material-icons right hide-on-small-only\">logout</i></NavLink>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n        </nav>\r\n      </div>\r\n\r\n      <ul id=\"slide-out\" className=\"sidenav\">\r\n        <li><div className=\"user-view center-align\">\r\n          <div className=\"background\">\r\n            <img alt=\"\" src=\"https://img.discogs.com/XOPpJ3wQribJGdk-rb4-yAfiBtM=/fit-in/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-2821873-1445885288-1628.jpeg.jpg\" />\r\n          </div>\r\n          <img alt=\"\" className=\"circle\" style={{\r\n             position: 'relative',\r\n             left: '50%',\r\n             marginLeft: '-25px'\r\n          }} src=\"https://sun9-50.userapi.com/c850024/v850024986/c3654/Sd5DUQOKadU.jpg\" />\r\n          <span className=\"white-text name\">{username}</span>\r\n          <span className=\"white-text email\">{email}</span>\r\n        </div></li>\r\n        <li>\r\n          <NavLink to='/home'>\r\n            <i className=\"material-icons\">home</i>\r\n            Home\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to={\"/\" + userId + \"/playlists\"}>\r\n          <i className=\"material-icons\">library_music</i>\r\n            My Playlists\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to='/users'>\r\n          <i className=\"material-icons\">people</i>\r\n            Users\r\n          </NavLink>\r\n        </li>\r\n        <li><div className=\"divider\"></div></li>\r\n        <li>\r\n          <NavLink to='/' className=\"sidenav-close\" onClick={logoutHandler}>\r\n          <i className=\"material-icons\">logout</i>\r\n            Logout\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n\r\n    </div>\r\n  ) : (\r\n    <div className=\"navbar-fixed\">\r\n      <nav className=\"grey darken-4\">\r\n        <div className=\"container nav-wrapper\">\r\n          <NavLink to='/' className=\"brand-logo left\">\r\n          MusicSearcher\r\n        </NavLink>\r\n            <ul id=\"nav-mobile\" className=\"right\">\r\n              <li>\r\n                <NavLink to='/signin'>Sign In</NavLink>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n","const updatePlaylistsReducer = (state = {}, action) => {\r\n    switch (action.type) {\r\n      // case 'ADD':\r\n      // return [...state, action.payload]\r\n      case 'UPDATE_PLAYLISTS':\r\n      // return state.filter(x => x.name !== action.payload.name)\r\n        return action.payload\r\n      default:\r\n        return state;\r\n  }\r\n}\r\n\r\nexport default updatePlaylistsReducer;\r\n","const updateQueryReducer = (state = \"\", action) => {\r\n    switch (action.type) {\r\n      case 'UPDATE_QUERY':\r\n        return action.payload\r\n      default:\r\n        return state;\r\n  }\r\n}\r\n\r\nexport default updateQueryReducer;\r\n","const updateTagReducer = (state = [], action) => {\r\n    switch (action.type) {\r\n      case 'UPDATE_TAG':\r\n        return [...new Set([...state, action.payload])]\r\n      default:\r\n        return state;\r\n  }\r\n}\r\n\r\nexport default updateTagReducer;\r\n","import updatePlaylistsReducer from './updatePlaylistsReducer'\r\nimport updateQueryReducer from './updateQueryReducer'\r\nimport updateTagReducer from './updateTagReducer'\r\n\r\nimport { combineReducers } from 'redux'\r\n\r\nexport default combineReducers({\r\n  playlists: updatePlaylistsReducer,\r\n  query: updateQueryReducer,\r\n  tags: updateTagReducer\r\n})\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n// import axios from 'axios';\r\n\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\n// import { updatePlaylists } from './actions';\r\nimport allReducer from './reducers/index';\r\n\r\nimport \"materialize-css/dist/js/materialize.min.js\";\r\nimport \"materialize-css/dist/css/materialize.min.css\";\r\n\r\n\r\nconst store = createStore(\r\n  allReducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n)\r\n\r\n\r\n// //action\r\n// const increment = () => {\r\n//   return {\r\n//     type: 'INCREMENT'\r\n//   }\r\n// }\r\n//\r\n// const decrement = () => {\r\n//   return {\r\n//     type: 'DECREMENT'\r\n//   }\r\n// }\r\n//\r\n// //reducer\r\n// const counter = (state = 0, action) => {\r\n//     switch (action.type) {\r\n//       case 'INCREMENT':\r\n//         return state + 1;\r\n//       case 'DECREMENT':\r\n//         return state - 1;\r\n//   }\r\n// }\r\n//\r\n//\r\n// let store = createStore(counter)\r\n// //log\r\n// store.subscribe(() => console.log(store.getState()))\r\n//\r\n// //dispatch\r\n// store.dispatch(increment())\r\n// store.dispatch(decrement())\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","import React, { useEffect } from 'react';\r\nimport { BrowserRouter as Router} from 'react-router-dom';\r\nimport { useRoutes } from './routes';\r\nimport { useAuth } from './hooks/auth.hook';\r\nimport { AuthContext } from './context/AuthContext';\r\nimport 'materialize-css';\r\nimport { Navbar } from './components/Navbar';\r\nimport queryString from \"query-string\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { updatePlaylists } from './actions';\r\nimport axios from 'axios';\r\n\r\n\r\nexport default function App() {\r\n  const { token, login, logout, userId, email, username } = useAuth()\r\n  const isAuthenticated = !!token\r\n  const routes = useRoutes(isAuthenticated, userId)\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    let query = queryString.parse(window.location.search);\r\n    if (query.token) {\r\n      login(query.token, query.id, query.email, query.username)\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && userId) {\r\n      axios.get('/api/users/' + userId + '/playlists')\r\n      .then(res => {\r\n        dispatch(updatePlaylists(res.data))\r\n      })\r\n      .catch(err => console.log(err))\r\n    }\r\n  })\r\n\r\n\r\n  return (\r\n    <AuthContext.Provider value={{\r\n      token, login, logout, userId, isAuthenticated, email, username\r\n    }}>\r\n      <Router>\r\n        <Navbar isAuthenticated={isAuthenticated} email={email} username={username} userId={userId} />\r\n        <div className='container'>\r\n          {routes}\r\n        </div>\r\n      </Router>\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n","import {useState, useCallback, useEffect} from 'react';\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null)\r\n  const [userId, setUserId] = useState(null)\r\n  const [email, setEmail] = useState(null)\r\n  const [username, setUsername] = useState(null)\r\n\r\n  const login = useCallback((jwtToken, id, email, username) => {\r\n    setToken(jwtToken)\r\n    setUserId(id)\r\n    setEmail(email)\r\n    setUsername(username)\r\n\r\n    localStorage.setItem(storageName, JSON.stringify({\r\n      userId: id, token: jwtToken, email: email, username: username\r\n    }))\r\n  }, [])\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null)\r\n    setUserId(null)\r\n    setEmail(null)\r\n    setUsername(null)\r\n    localStorage.removeItem(storageName)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName))\r\n    if (data && data.token) {\r\n      login(data.token, data.userId, data.email, data.username)\r\n    }\r\n  }, [login])\r\n\r\n  return { login, logout, token, userId, email, username}\r\n}\r\n","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport { RegistrationPage } from './pages/RegistrationPage';\r\nimport { AuthPage } from './pages/AuthPage';\r\nimport { HomePage } from './pages/HomePage';\r\nimport { PlaylistsPage } from './pages/PlaylistsPage';\r\nimport { UsersPage } from './pages/UsersPage';\r\nimport { AlbumPage } from './pages/AlbumPage';\r\nimport { TagsPage } from './pages/TagsPage';\r\n\r\nexport const useRoutes = (isAuthenticated, userId) => {\r\n  if (isAuthenticated) {\r\n    return (<Switch>\r\n      <Route path=\"/home\">\r\n        <HomePage/>\r\n      </Route>\r\n\r\n      <Route path={\"/\" + userId + \"/playlists\"}>\r\n        <PlaylistsPage/>\r\n      </Route>\r\n\r\n      <Route path=\"/albums/tags/:tag\" component={TagsPage} />\r\n      <Route path=\"/albums/:artist/:albumName\" component={AlbumPage} />\r\n\r\n      <Route path=\"/users\">\r\n        <UsersPage/>\r\n      </Route>\r\n\r\n      <Redirect to={\"/\" + userId + \"/playlists\"}/>\r\n\r\n    </Switch>);\r\n  }\r\n  return (<Switch>\r\n\r\n    <Route path=\"/albums/tags/:tag\" component={TagsPage} />\r\n    <Route path=\"/albums/:artist/:albumName\" component={AlbumPage} />\r\n    \r\n    <Route path=\"/signin\">\r\n      <AuthPage/>\r\n    </Route>\r\n\r\n    <Route path=\"/signup\">\r\n      <RegistrationPage/>\r\n    </Route>\r\n\r\n    <Route path=\"/\">\r\n      <HomePage/>\r\n    </Route>\r\n\r\n\r\n    <Redirect to=\"/\"/>\r\n\r\n  </Switch>);\r\n}\r\n"],"sourceRoot":""}