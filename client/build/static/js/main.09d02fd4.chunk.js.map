{"version":3,"sources":["hooks/http.hook.js","hooks/message.hook.js","pages/RegistrationPage.js","context/AuthContext.js","pages/AuthPage.js","actions/index.js","components/CreatePlaylist.js","components/Spinner.js","components/AlbumsList.js","pages/HomePage.js","components/PlaylistCard.js","components/Playlists.js","components/Playlist.js","pages/PlaylistsPage.js","pages/UsersPage.js","components/Navbar.js","reducers/updatePlaylistsReducer.js","reducers/updateQueryReducer.js","reducers/index.js","index.js","App.js","hooks/auth.hook.js","routes.js"],"names":["useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","useMessage","text","window","M","toast","html","RegistrationPage","username","email","password","form","setForm","useEffect","updateTextFields","changeHandler","event","target","name","value","registerHandler","className","style","marginBottom","textAlign","marginTop","id","type","onChange","htmlFor","paddingTop","to","marginRight","onClick","disabled","noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","AuthPage","auth","useContext","queryString","parse","location","search","status","setTimeout","replace","loginHandler","href","updatePlaylists","playlists","payload","updateQuery","query","CreatePlaylist","album","playlistName","setPlaylistName","dispatch","useDispatch","e","axios","post","localStorage","getItem","then","res","Spinner","borderColor","apiKey","AlbumsList","searchQuery","useSelector","state","playlistsNames","Object","keys","albums","setAlbums","currentAlbum","setCurrentAlbum","length","lastFmAlbums","results","albummatches","topalbums","filter","index","self","indexOf","Dropdown","init","document","querySelectorAll","constrainWidth","Modal","endingTop","map","image","key","src","alt","onMouseEnter","artist","data-target","preventDefault","addToPlaylist","tabIndex","HomePage","PlaylistCard","imageUrls","setImageUrls","artists","setArtists","join","styles","height","background","playlistCover","stopPropagation","line","element","truncateText","Playlists","role","aria-label","Playlist","props","match","params","albumName","deleteFromPlaylist","renderAlbums","PlaylistsPage","exact","path","component","UsersPage","renderList","users","currentUser","_id","setState","prevState","allChecked","user","isChecked","every","find","undefined","checked","handleClick","Date","registrationDate","toLocaleString","lastLoginDate","width","itemName","deleteUser","forEach","delete","console","log","x","removeItem","reload","blockUser","some","unblockUser","get","catch","this","marginLeft","Component","Navbar","history","useHistory","logoutHandler","push","sidenav","querySelector","Sidenav","edge","inDuration","autocomplete","Autocomplete","position","left","updatePlaylistsReducer","action","updateQueryReducer","combineReducers","store","createStore","allReducer","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","setToken","setUserId","setEmail","setUsername","jwtToken","setItem","useAuth","routes","useRoutes","err","Provider","getElementById"],"mappings":"4QAEaA,EAAU,WAAO,IAAD,EACGC,oBAAS,GADZ,mBACpBC,EADoB,KACXC,EADW,OAEDF,mBAAS,MAFR,mBAEpBG,EAFoB,KAEbC,EAFa,KAgC3B,MAAO,CAAEH,UAASI,QA5BFC,sBAAW,uCACzB,WAAOC,GAAP,mCAAAC,EAAA,6DAAYC,EAAZ,+BAAqB,MAAOC,EAA5B,+BAAmC,OAAQC,EAA3C,+BAAqD,GACrDT,GAAW,GADX,SAGMQ,IACFA,EAAOE,KAAKC,UAAUH,GACtBC,EAAQ,gBAAkB,oBAL9B,SAQyBG,MAAMP,EAAK,CAACE,SAAQC,OAAMC,YARnD,cAQQI,EARR,iBASqBA,EAASC,OAT9B,WASQC,EATR,OAWOF,EAASG,GAXhB,uBAYU,IAAIC,MAAMF,EAAKG,SAAW,wBAZpC,eAeElB,GAAW,GAfb,kBAiBSe,GAjBT,wCAmBEf,GAAW,GACXE,EAAS,KAAEgB,SApBb,+DADyB,sDAwBxB,IAIwBjB,QAAOkB,WAFff,uBAAY,kBAAMF,EAAS,QAAO,MC9B1CkB,EAAa,WACxB,OAAOhB,uBAAY,SAAAiB,GACbC,OAAOC,GAAKF,GACdC,OAAOC,EAAEC,MAAM,CAAEC,KAAMJ,MAExB,KCDQK,EAAmB,WAC9B,IAAMR,EAAUE,IADoB,EAEUvB,IAAvCE,EAF6B,EAE7BA,QAASI,EAFoB,EAEpBA,QAASF,EAFW,EAEXA,MAAOkB,EAFI,EAEJA,WAFI,EAGZrB,mBAAS,CAC/B6B,SAAU,GAAIC,MAAO,GAAIC,SAAU,KAJD,mBAG7BC,EAH6B,KAGvBC,EAHuB,KAOpCC,qBAAU,WACRd,EAAQjB,GACRkB,MACC,CAAClB,EAAOiB,EAASC,IAEpBa,qBAAU,WACRV,OAAOC,EAAEU,qBACR,IAEHD,qBAAU,WACRV,OAAOC,EAAEU,qBACR,IAEH,IAAMC,EAAgB,SAAAC,GACpBJ,EAAQ,eAAKD,EAAN,eAAaK,EAAMC,OAAOC,KAAOF,EAAMC,OAAOE,UAGjDC,EAAe,uCAAG,4BAAAjC,EAAA,+EAEDH,EAAQ,qBAAsB,OAAvB,eAAmC2B,IAFzC,OAEdf,EAFc,OAGpBG,EAAQH,EAAKG,SAHO,uGAAH,qDAOrB,OACE,yBAAKsB,UAAU,MAAMC,MAAO,CAAEC,aAAc,MAC1C,yBAAKF,UAAU,iCAAiCC,MAAO,CAAEE,UAAW,SAAUC,UAAW,QACvF,yBAAKJ,UAAU,QACb,yBAAKA,UAAU,gBACb,0BAAMA,UAAU,cACd,wCAEF,6BAEE,yBAAKA,UAAU,eACb,uBAAGA,UAAU,yBAAb,kBACA,2BACEA,UAAU,aACVK,GAAG,WACHC,KAAK,OACLT,KAAK,WACLU,SAAUb,IAEZ,2BAAOc,QAAQ,YAAf,aAEF,yBAAKR,UAAU,eACb,uBAAGA,UAAU,yBAAb,SACA,2BACEA,UAAU,aACVK,GAAG,QACHC,KAAK,OACLT,KAAK,QACLU,SAAUb,IAEZ,2BAAOc,QAAQ,SAAf,UAEF,yBAAKR,UAAU,eACb,uBAAGA,UAAU,yBAAb,QACA,2BACEA,UAAU,aACVK,GAAG,WACHC,KAAK,WACLT,KAAK,WACLU,SAAUb,IAEZ,2BAAOc,QAAQ,YAAf,YACA,yBAAKP,MAAO,CAACQ,WAAY,UACvB,kBAAC,IAAD,CAAMC,GAAG,UAAUV,UAAU,aAA7B,eAMR,yBAAKA,UAAU,eACb,4BACEA,UAAU,oBACVC,MAAO,CAACU,YAAa,QACrBC,QAASb,EACTc,SAAUtD,GAJZ,gBCrFZ,SAASuD,KAEF,IAAMC,EAAcC,wBAAc,CACvCC,MAAO,KACPC,OAAQ,KACR9B,MAAO,KACPD,SAAU,KACVgC,MAAOL,EACPM,OAAQN,EACRO,iBAAiB,I,iBCHNC,EAAW,WACtB,IAAMC,EAAOC,qBAAWT,GAElBrC,EAAUE,IAHY,EAIkBvB,IAAvCE,EAJqB,EAIrBA,QAASI,EAJY,EAIZA,QAASF,EAJG,EAIHA,MAAOkB,EAJJ,EAIIA,WAJJ,EAKJrB,mBAAS,CAC/B8B,MAAO,GAAIC,SAAU,KANK,mBAKrBC,EALqB,KAKfC,EALe,KAS5BC,qBAAU,WAEa,YADTiC,IAAYC,MAAM5C,OAAO6C,SAASC,QACpCC,SACRnD,EAAQ,qJACRC,IACAmD,YAAW,kBAAMhD,OAAO6C,SAASI,QAAQ,aAAY,OAGvDrD,EAAQjB,GACRkB,MACC,CAAClB,EAAOiB,EAASC,IAEpBa,qBAAU,WACRV,OAAOC,EAAEU,qBACR,IAEH,IAAMC,EAAgB,SAAAC,GACpBJ,EAAQ,eAAKD,EAAN,eAAaK,EAAMC,OAAOC,KAAOF,EAAMC,OAAOE,UAGjDkC,EAAY,uCAAG,4BAAAlE,EAAA,+EAEEH,EAAQ,kBAAmB,OAApB,eAAgC2B,IAFzC,OAEXf,EAFW,OAGjBgD,EAAKJ,MAAM5C,EAAK0C,MAAO1C,EAAK2C,OAAQ3C,EAAKa,MAAOb,EAAKY,UAHpC,uGAAH,qDAQlB,OACE,yBAAKa,UAAU,MAAMC,MAAO,CAAEC,aAAc,MAC1C,yBAAKF,UAAU,iCAAiCC,MAAO,CAAEE,UAAW,SAAUC,UAAW,QACvF,yBAAKJ,UAAU,QACb,yBAAKA,UAAU,gBACb,0BAAMA,UAAU,cACd,wCAEF,6BAEE,yBAAKA,UAAU,eACb,uBAAGA,UAAU,yBAAb,SACA,2BACEA,UAAU,aACVK,GAAG,QACHC,KAAK,OACLT,KAAK,QACLU,SAAUb,IAEZ,2BAAOc,QAAQ,SAAf,UAEF,yBAAKR,UAAU,eACb,uBAAGA,UAAU,yBAAb,QACA,2BACEA,UAAU,aACVK,GAAG,WACHC,KAAK,WACLT,KAAK,WACLU,SAAUb,IAEZ,2BAAOc,QAAQ,YAAf,YAEA,yBAAKP,MAAO,CAACQ,WAAY,UACvB,uBAAGwB,KAAK,mBAAmBjC,UAAU,qDAArC,wBAEF,yBAAKC,MAAO,CAACQ,WAAY,SACvB,uBAAGwB,KAAK,oBAAoBjC,UAAU,+CAAtC,yBAEF,uBAAGC,MAAO,CAACQ,WAAY,UAAvB,0BAGA,6BACE,kBAAC,IAAD,CAAMC,GAAG,UAAUV,UAAU,aAA7B,eAMR,yBAAKA,UAAU,eACb,4BACEA,UAAU,oBACVC,MAAO,CAACU,YAAa,QACrBC,QAASoB,EACTnB,SAAUtD,GAJZ,gB,uBC9FC2E,EAAkB,SAACC,GAC9B,MAAO,CACL7B,KAAM,mBACN8B,QAASD,IAIAE,EAAc,SAACC,GAC1B,MAAO,CACLhC,KAAM,eACN8B,QAASE,ICJAC,EAAiB,SAAC,GAAa,IAAZC,EAAW,EAAXA,MAAW,EACDlF,qBADC,mBAClCmF,EADkC,KACpBC,EADoB,KAEnCC,EAAWC,cAWjB,OAAQ,6BACN,yBAAKvC,GAAG,SAASL,UAAU,SACzB,yBAAKA,UAAU,iBACb,2BAAOH,KAAK,eAAeG,UAAU,aAAaM,KAAK,OAAOC,SAZ9C,SAAAsC,GACpBH,EAAgBG,EAAEjD,OAAOE,WAavB,yBAAKE,UAAU,gBACb,4BAAQA,UAAU,gCAAgCY,QAXjC,WACrBkC,IAAMC,KAAK,cAAgB7E,KAAKwD,MAAMsB,aAAaC,QAAQ,aAAa/B,OAAS,qBAAsB,CAACuB,eAAcD,UACrHU,MAAK,SAAAC,GAAG,OAAIR,EAAST,EAAgBiB,EAAI5E,YAStC,UCvBK6E,EAAU,WACrB,OACE,yBAAKpD,UAAU,eAAeC,MAAO,CAAEG,UAAW,SAChD,yBAAKJ,UAAU,gCACb,yBAAKA,UAAU,gBAAgBC,MAAO,CAAEoD,YAAa,YACnD,yBAAKrD,UAAU,uBACb,yBAAKA,UAAU,YACX,yBAAKA,UAAU,aACnB,yBAAKA,UAAU,YACX,yBAAKA,UAAU,wBACnB,yBAAKA,UAAU,gB,iBCHzBsD,EAAS,mCAEEC,EAAa,WACxB,IAAMC,EAAcC,aAAY,SAAAC,GAAK,OAAIA,EAAMpB,SACzCqB,EAAiBF,aAAY,SAAAC,GAAK,OAAIE,OAAOC,KAAKH,EAAMvB,cACxDQ,EAAWC,cAHa,EAIFtF,mBAAS,IAJP,mBAIvBwG,EAJuB,KAIfC,EAJe,OAKUzG,qBALV,mBAKvB0G,EALuB,KAKTC,EALS,KAO9BzE,qBAAU,WACJgE,EAAYU,OACd9F,MAAM,gEAAD,OAAiEoF,EAAjE,oBAAwFF,EAAxF,0BAAuHJ,MAAK,SAAAC,GAAG,OAAIA,EAAI7E,UAAQ4E,MAAK,SAAA3E,GACvJ,IAAI4F,EAAe5F,EAAK6F,QAAQC,aAAa7B,MAC7CuB,EAAUI,MAGZ/F,MAAM,oEAAD,OAjBM,iBAiBN,oBAAyFkF,EAAzF,+BAA6HJ,MAAK,SAAAC,GAAG,OAAIA,EAAI7E,UAAQ4E,MAAK,SAAA3E,GAAS,IAAD,EACjK4F,EAAY,UAAG5F,EAAK+F,iBAAR,aAAG,EAAgB9B,MACnCuB,EAAUI,EAAaI,QAAO,SAAC/B,EAAOgC,EAAOC,GAC3C,OAAOD,IAAUC,EAAKC,QAAQlC,YAInC,CAACgB,IAEJhE,qBAAU,WACRT,IAAE4F,SAASC,KAAKC,SAASC,iBAAiB,qBAAsB,CAACC,gBAAgB,IACjFhG,IAAEiG,MAAMJ,KAAKC,SAASC,iBAAiB,UAAW,CAACG,UAAW,WAShE,OAAOnB,EAAOI,OACT,yBAAKlE,UAAU,iBAEd8D,EAAOoB,KAAI,SAAA1C,GACT,OAAOA,EAAM2C,MAAM,GAAG,UACpB,yBAAKnF,UAAU,kBAAkBoF,IAAK5C,EAAM3E,KAC1C,yBAAKmC,UAAU,cACb,yBAAKqF,IAAK7C,EAAM2C,MAAM,GAAG,SAAUG,IAAI,GAAGC,aAAc,WACpDtB,EAAgBzB,OAGtB,yBAAKxC,UAAU,gBACb,4BAAKwC,EAAMgD,OAAO3F,MAAQ2C,EAAMgD,QAChC,2BAAIhD,EAAM3C,OAGVmD,aAAaC,QAAQ,aAAe,6BAChC,yBAAKwC,cAAY,YAAYzF,UAAU,iDAEvC,wBAAIK,GAAG,YAAYL,UAAU,oBAEzB2D,EAAeuB,KAAI,SAAAzC,GAAY,OAAI,wBAAI2C,IAAK3C,GAC1C,uBAAG7B,QAAS,SAACiC,GACTA,EAAE6C,iBA7BR,SAACjD,GACrBK,IAAMC,KAAK,cAAgB7E,KAAKwD,MAAMsB,aAAaC,QAAQ,aAAa/B,OAAS,cAAgBuB,EAAe,WAAY,CAACA,eAAcuB,iBAAed,MAAK,SAAA7E,GAC7JsE,EAAST,EAAgB7D,EAASE,UA4BVoH,CAAclD,IACbR,KAAK,MAAMQ,OAGpB,wBAAIzC,UAAU,UAAU4F,SAAS,OACjC,4BACE,uBAAG5F,UAAU,gBAAgBiC,KAAK,WAChC,uBAAGjC,UAAU,kBAAb,OADF,uBAUlB,kBAAC,EAAD,CAAgBwC,MAAOwB,KAEvB,kBAAC,EAAD,OCnFO6B,EAAW,WACtB,OACE,6BACE,kBAAC,EAAD,Q,iBCAOC,EAAe,SAAC,GAA8B,IAA5BhC,EAA2B,EAA3BA,OAAQrB,EAAmB,EAAnBA,aAE/BE,EAAWC,cAFuC,EAItBtF,mBAAS,IAJa,mBAIjDyI,EAJiD,KAItCC,EAJsC,OAK1B1I,mBAAS,IALiB,mBAKjD2I,EALiD,KAKxCC,EALwC,KAOxD1G,qBAAU,WACR0G,EACEpC,EAAOoB,KAAI,SAAA1C,GAAK,OAAIA,EAAMgD,OAAO3F,MAAQ2C,EAAMgD,UAAQW,KAAK,OAG1DrC,EAAOI,OAAS,EAClB8B,EAAa,OAAD,OAAQlC,EAAO,GAAGqB,MAAM,GAAG,SAA3B,MAEZa,EAAa,OAAD,OAAQlC,EAAO,GAAGqB,MAAM,GAAG,SAA3B,qCAAgErB,EAAO,GAAGqB,MAAM,GAAG,SAAnF,sCAAyHrB,EAAO,GAAGqB,MAAM,GAAG,SAA5I,wCAAoLrB,EAAO,GAAGqB,MAAM,GAAG,SAAvM,+BAEb,CAACrB,IAEJ,IAAMsC,EAAS,CACb,cAAiB,CACfC,OAAQ,OACRC,WAAW,GAAD,OAAKP,KAanB,OAAOjC,GACL,yBAAK9D,UAAU,sBACb,yBAAKA,UAAU,aAAaY,QAJX,kBAAM9B,OAAO6C,SAASM,MAAhB,WAA4BQ,KAM/CqB,EAAOI,OAAS,EACZ,yBAAKlE,UAAU,iBAAiBC,MAAOmG,EAAOG,gBAC9C,yBAAKlB,IAAKvB,EAAOA,EAAOI,OAAS,GAAGiB,MAAM,GAAG,SAAUG,IAAI,KAEjE,0BAAMtF,UAAU,6BACbyC,EACD,0BAAMzC,UAAU,oBAEd,uBAAGA,UAAU,iCAAiCY,QArBjC,SAACiC,GACtBA,EAAE2D,kBACF1D,IAAMC,KAAK,cAAgB7E,KAAKwD,MAAMsB,aAAaC,QAAQ,aAAa/B,OAAS,cAAgBuB,EAAe,YAAYS,MAAK,SAAA7E,GAC/HsE,EAAST,EAAgB7D,EAASE,YAkB5B,aAKN,yBAAKyB,UAAU,gBACb,kBAAC,IAAD,CAAcyG,KAAM,EAAGC,QAAQ,IAAIC,aAAa,SAAI9H,KAAMoH,OCtDrDW,EAAY,WACvB,IAAMzE,EAAYsB,aAAY,SAAAC,GAAK,OAAIA,EAAMvB,aAE7C,OAAKA,EAEOyB,OAAOC,KAAK1B,GAAW+B,OAKjC,yBAAKlE,UAAU,iBAEf4D,OAAOC,KAAK1B,GAAW+C,KAAI,SAAArF,GAAI,OAAI,kBAAC,EAAD,CAAcuF,IAAKvF,EAAMiE,OAAQ3B,EAAUtC,GAAO4C,aAAc5C,QAN5F,kBAAC,EAAD,MAFA,wBAAII,MAAO,CAAEE,UAAW,SAAUC,UAAW,QAA7C,mBAAqE,0BAAMyG,KAAK,MAAMC,aAAW,OAA5B,kBCHnEC,EAAW,SAACC,GACvB,IAAMrE,EAAWC,cACXkB,EAASL,aAAY,SAAAC,GAAK,OAAIA,EAAMvB,UAAU6E,EAAMC,MAAMC,OAAOzE,iBAqBvE,OAAKqB,EAIG,wBAAI9D,UAAU,cACpB,wBAAIA,UAAU,0BACZ,4BAAQA,UAAU,uCAAsC,uBAAGA,UAAU,iBAAiBY,QAAS,kBAAM9B,OAAO6C,SAASM,KAAhB,WAA2B+E,EAAMC,MAAMC,OAAO7G,GAA9C,gBAA7C,wBACxD,4BAAK2G,EAAMC,MAAMC,OAAOzE,eAG1B,wBAAIzC,UAAU,mBACZ,yBAAKA,UAAU,iBAxBE,SAAC8D,EAAQrB,GAAT,OAA0BqB,EAAOoB,KAAI,SAAA1C,GACxD,OAAQ,yBAAKxC,UAAU,kBAAkBoF,IAAK5C,EAAM3C,MAClD,yBAAKG,UAAU,cACb,yBAAKqF,IAAK7C,EAAM2C,MAAM,GAAG,SAAUG,IAAI,MAEzC,yBAAKtF,UAAU,gBACb,4BAAKwC,EAAMgD,OAAO3F,MAAQ2C,EAAM3C,MAChC,2BAAI2C,EAAM3C,OAEZ,yBAAKG,UAAU,oCAAoCY,QAAS,kBAfrC,SAACuG,EAAW1E,GACrCK,IAAMC,KAAK,cAAgB7E,KAAKwD,MAAMsB,aAAaC,QAAQ,aAAa/B,OAAS,cAAgBuB,EAAe,gBAAiB,CAACA,EAAc0E,IAAYjE,MAAK,SAAA7E,GAC/JsE,EAAST,EAAgB7D,EAASE,UAagC6I,CAAmB5E,EAAM3C,KAAM4C,UAgB9F4E,CAAavD,EAAQkD,EAAMC,MAAMC,OAAOzE,iBAXtC,kBAAC,EAAD,OCzBE6E,EAAgB,WAC3B,OACA,yBAAKtH,UAAU,MAAMC,MAAO,CAAEG,UAAW,UACvC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOmH,OAAK,EAACC,KAAK,kBAClB,yCACE,kBAAC,EAAD,OAGF,kBAAC,IAAD,CAAOA,KAAK,+BAA+BC,UAAWV,O,wCCX/CW,EAAb,YACE,WAAYV,GAAQ,IAAD,8BACjB,4CAAMA,KAkBRW,WAAa,WACX,OAAO,EAAKjE,MAAMkE,MAAM1C,KAAI,SAAA2C,GAAW,OACrC,wBACEzC,IAAKyC,EAAYC,IACjBlH,QAAS,SAACiC,GACR,IAAIxC,EAAKwH,EAAYC,IAErB,EAAKC,UAAS,SAAAC,GAAc,IACpBJ,EAAsBI,EAAtBJ,MAAOK,EAAeD,EAAfC,WAKX,OADAA,GAHAL,EAAQA,EAAM1C,KAAI,SAAAgD,GAAI,OACpBA,EAAKJ,MAAQzH,EAAb,eAAuB6H,EAAvB,CAA6BC,WAAYD,EAAKC,YAAcD,MAE3CE,OAAM,SAAAF,GAAI,OAAIA,EAAKC,aAC/B,CAAEP,QAAOK,kBAItBjI,UAAW,EAAK0D,MAAMkE,MAAMS,MAAK,SAAAH,GAAI,OAAIA,EAAKJ,MAAQD,EAAYC,OAAKK,UAAY,eAAYG,GAE/F,4BAEE,+BACE,2BACEhI,KAAK,WACL8E,IAAKyC,EAAYC,IACjBjI,KAAMgI,EAAY1I,SAClBW,MAAO+H,EAAY1I,SACnBoJ,QAASV,EAAYM,UACrB5H,SAAU,EAAKiI,YACfxI,UAAU,cAEZ,iCAKJ,4BAAK6H,EAAY1I,UACjB,4BAAK0I,EAAYzI,OACjB,4BAAKyI,EAAYC,KACjB,4BAAK,IAAIW,KAAKZ,EAAYa,kBAAkBC,kBAC5C,4BAAK,IAAIF,KAAKZ,EAAYe,eAAeD,kBACzC,wBAAI1I,MAAO,CAAC4I,MAAO,QAAS7I,UAAW6H,EAAYhG,QAASgG,EAAYhG,aA5D3D,EAkEnB2G,YAAc,SAAC3F,GACb,IAAIiG,EAAWjG,EAAEjD,OAAOC,KACpB0I,EAAU1F,EAAEjD,OAAO2I,QAEvB,EAAKR,UAAS,SAAAC,GAAc,IACpBJ,EAAsBI,EAAtBJ,MAAOK,EAAeD,EAAfC,WAUb,MATiB,aAAba,GACFb,EAAaM,EACbX,EAAQA,EAAM1C,KAAI,SAAAgD,GAAI,sBAAUA,EAAV,CAAgBC,UAAWI,QAKjDN,GAHAL,EAAQA,EAAM1C,KAAI,SAAAgD,GAAI,OACpBA,EAAK/I,WAAa2J,EAAlB,eAAkCZ,EAAlC,CAAwCC,WAAYD,EAAKC,YAAcD,MAEtDE,OAAM,SAAAF,GAAI,OAAIA,EAAKC,aAEjC,CAAEP,QAAOK,kBAjFD,EAqFnBc,WAAa,WACG,EAAKrF,MAAMkE,MAAMrD,QAAO,SAAA2D,GAAI,OAAIA,EAAKC,aAC3Ca,SAAQ,SAAAd,GACdpF,IAAMmG,OAAO,cAAgBf,EAAKJ,KAC/B5E,MAAK,SAAA7E,GAAc6K,QAAQC,IAAI9K,EAASE,SACxC2E,MAAK,WACJ,EAAK6E,UAAS,SAAAC,GACX,MAAO,CAAEJ,MAAOI,EAAUJ,MAAMrD,QAAO,SAAA6E,GAAC,OAAIA,EAAEtB,MAAQI,EAAKJ,WAE1D5J,KAAKwD,MAAMsB,aAAaC,QAAQ,aAAa/B,SAAWgH,EAAKJ,MAC/D9E,aAAaqG,WAAW,YACxBvK,OAAO6C,SAAS2H,iBAhGP,EAsGnBC,UAAY,WACV,IAAIhB,EAAU,EAAK7E,MAAMkE,MAAMrD,QAAO,SAAA2D,GAAI,OAAIA,EAAKC,aACnDI,EAAQS,SAAQ,SAAAd,GACdA,EAAKrG,OAAS,UACd,EAAKkG,UAAS,SAAAC,GACZ,MAAO,CAAEJ,MAAOI,EAAUJ,MAAM1C,KAAI,SAAAkE,GAAC,sBAAUA,EAAV,CAAalB,gBAEpDpF,IAAMC,KAAK,cAAgBmF,EAAKJ,IAAM,WAAYI,GAAMhF,MAAK,SAAAC,GAAG,OAAI+F,QAAQC,IAAIhG,EAAI5E,YAGlFgK,EAAQiB,MAAK,SAAAtB,GAAI,OAAIhK,KAAKwD,MAAMsB,aAAaC,QAAQ,aAAa/B,SAAWgH,EAAKJ,SACpF9E,aAAaqG,WAAW,YACxBvK,OAAO6C,SAAS2H,WAlHD,EAsHnBG,YAAc,WACE,EAAK/F,MAAMkE,MAAMrD,QAAO,SAAA2D,GAAI,OAAIA,EAAKC,aAC3Ca,SAAQ,SAAAd,GACdA,EAAKrG,OAAS,SACd,EAAKkG,UAAS,SAAAC,GACZ,MAAO,CAAEJ,MAAOI,EAAUJ,MAAM1C,KAAI,SAAAkE,GAAC,sBAAUA,EAAV,CAAalB,gBAEpDpF,IAAMC,KAAK,cAAgBmF,EAAKJ,IAAM,WAAYI,GAAMhF,MAAK,SAAAC,GAAG,OAAI+F,QAAQC,IAAIhG,EAAI5E,aA3HtF,EAAKmF,MAAQ,CACXuE,YAAY,EACZL,MAAO,IAJQ,EADrB,iFAUuB,IAAD,OAClB9E,IAAM4G,IAAI,cACPxG,MAAK,SAAA7E,GACJ,EAAK0J,SAAS,CACZH,MAAOvJ,EAASE,KAAK2G,KAAI,SAAAgD,GAAI,sBAAUA,EAAV,CAAgBC,WAAW,YAG3DwB,OAAM,SAAClM,GAAYyL,QAAQC,IAAI1L,QAjBtC,+BAoII,OACE,6BACE,qCACA,2BAAOuC,UAAU,SACf,2BAAOA,UAAU,eACf,4BACE,4BACE,2BAAOQ,QAAQ,YACb,2BACEH,GAAG,WACHR,KAAK,WACLS,KAAK,WACLN,UAAU,YACVO,SAAUqJ,KAAKpB,YACfD,QAASqB,KAAKlG,MAAMuE,aAEtB,iCAGJ,wCACA,qCACA,kCACA,iDACA,+CACA,wCAGJ,+BACI2B,KAAKjC,eAIX,2BACI,4BACE/G,QAASgJ,KAAKb,WACd/I,UAAU,8CAFZ,SAKG,uBAAGA,UAAU,iCAAb,WAEH,4BACEY,QAASgJ,KAAKL,UACdvJ,UAAU,6CACVC,MAAO,CACH4J,WAAY,MACZlJ,YAAa,QALnB,QASG,uBAAGX,UAAU,iCAAb,SAEH,4BACEY,QAASgJ,KAAKH,YACdzJ,UAAU,8CAFZ,UAKG,uBAAGA,UAAU,wBAAb,oBA5Lf,GAA+B8J,a,iBCIlBC,EAAS,SAAC,GAAkD,IAAhD1I,EAA+C,EAA/CA,gBAAiBjC,EAA8B,EAA9BA,MAAOD,EAAuB,EAAvBA,SAAU+B,EAAa,EAAbA,OACnD8I,EAAUC,cACVtH,EAAWC,cACXrB,EAAOC,qBAAWT,GAElBmJ,EAAgB,SAACvK,GACrBA,EAAM+F,iBACNnE,EAAKH,SACL4I,EAAQG,KAAK,MAqBf,OAbA3K,qBAAU,WAER,IAAM4K,EAAUvF,SAASwF,cAAc,YACvCtL,IAAEuL,QAAQ1F,KAAKwF,EAAS,CACpBG,KAAM,OACNC,WAAY,MAEhB,IAAMC,EAAe5F,SAASwF,cAAc,iBAC5CtL,IAAE2L,aAAa9F,KAAK6F,EAAc,CAChClM,KAAM,QAIH8C,EACL,6BACE,yBAAKrB,UAAU,gBACb,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,yBACb,kBAAC,IAAD,CAASU,GAAG,IAAI+E,cAAY,YAAYzF,UAAU,iCAAgC,uBAAGA,UAAU,kBAAb,SAClF,kBAAC,IAAD,CAASU,GAAG,QAAQV,UAAU,qCAAqCY,QAAS,kBAAM+B,EAASN,EAAY,OAAvG,iBAGE,wBAAIhC,GAAG,aAAaL,UAAU,SAC5B,wBAAIA,UAAU,UACZ,yBAAKA,UAAU,eACX,uBAAGA,UAAU,yBAAb,UACA,2BACEM,KAAK,OACLD,GAAG,qBAAqBL,UAAU,eAClCO,SAlCP,SAACsC,GACdmH,EAAQG,KAAK,SACbxH,EAASN,EAAYQ,EAAEjD,OAAOE,aAoClB,4BACE,kBAAC,IAAD,CAASY,GAAG,IAAIE,QAASsJ,GAAe,uBAAGlK,UAAU,2CAAb,gBAOpD,wBAAIK,GAAG,YAAYL,UAAU,WAC3B,4BAAI,yBAAKA,UAAU,0BACjB,yBAAKA,UAAU,cACb,yBAAKsF,IAAI,GAAGD,IAAI,mLAElB,yBAAKC,IAAI,GAAGtF,UAAU,SAASC,MAAO,CACnC0K,SAAU,WACVC,KAAM,MACNf,WAAY,SACZxE,IAAI,yEACP,0BAAMrF,UAAU,mBAAmBb,GACnC,0BAAMa,UAAU,oBAAoBZ,KAEtC,4BACE,kBAAC,IAAD,CAASsB,GAAG,SACV,uBAAGV,UAAU,kBAAb,QADF,SAKF,4BACE,kBAAC,IAAD,CAASU,GAAI,IAAMQ,EAAS,cAC5B,uBAAGlB,UAAU,kBAAb,iBADA,iBAKF,4BACE,kBAAC,IAAD,CAASU,GAAG,UACZ,uBAAGV,UAAU,kBAAb,UADA,UAKF,4BAAI,yBAAKA,UAAU,aACnB,4BACE,kBAAC,IAAD,CAASU,GAAG,IAAIV,UAAU,gBAAgBY,QAASsJ,GACnD,uBAAGlK,UAAU,kBAAb,UADA,aASN,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,yBACb,kBAAC,IAAD,CAASU,GAAG,IAAIV,UAAU,mBAA1B,iBAGE,wBAAIK,GAAG,aAAaL,UAAU,SAC5B,4BACE,kBAAC,IAAD,CAASU,GAAG,WAAZ,iB,YCvGDmK,EAZgB,WAAyB,IAAxBnH,EAAuB,uDAAf,GAAIoH,EAAW,uCACnD,OAAQA,EAAOxK,MAGb,IAAK,mBAEH,OAAOwK,EAAO1I,QAChB,QACE,OAAOsB,ICCAqH,EATY,WAAyB,IAAxBrH,EAAuB,uDAAf,GAAIoH,EAAW,uCAC/C,OAAQA,EAAOxK,MACb,IAAK,eACH,OAAOwK,EAAO1I,QAChB,QACE,OAAOsB,ICDAsH,cAAgB,CAC7B7I,UAAW0I,EACXvI,MAAOyI,ICSHE,I,MAAQC,YACZC,EAAYrM,OAAOsM,8BAAgCtM,OAAOsM,iCAsC5DC,IAASC,OACP,kBAAC,IAAD,CAAUL,MAAOA,IACf,mBC3CW,WAAgB,IAAD,ECTP,WAAO,IAAD,EACD3N,mBAAS,MADR,mBACpB2D,EADoB,KACbsK,EADa,OAECjO,mBAAS,MAFV,mBAEpB4D,EAFoB,KAEZsK,EAFY,OAGDlO,mBAAS,MAHR,mBAGpB8B,EAHoB,KAGbqM,EAHa,OAIKnO,mBAAS,MAJd,mBAIpB6B,EAJoB,KAIVuM,EAJU,KAMrBvK,EAAQvD,uBAAY,SAAC+N,EAAUtL,EAAIjB,EAAOD,GAC9CoM,EAASI,GACTH,EAAUnL,GACVoL,EAASrM,GACTsM,EAAYvM,GAEZ6D,aAAa4I,QAdG,WAckB1N,KAAKC,UAAU,CAC/C+C,OAAQb,EAAIY,MAAO0K,EAAUvM,MAAOA,EAAOD,SAAUA,OAEtD,IAEGiC,EAASxD,uBAAY,WACzB2N,EAAS,MACTC,EAAU,MACVC,EAAS,MACTC,EAAY,MACZ1I,aAAaqG,WAxBG,cAyBf,IASH,OAPA7J,qBAAU,WACR,IAAMjB,EAAOL,KAAKwD,MAAMsB,aAAaC,QA5BrB,aA6BZ1E,GAAQA,EAAK0C,OACfE,EAAM5C,EAAK0C,MAAO1C,EAAK2C,OAAQ3C,EAAKa,MAAOb,EAAKY,YAEjD,CAACgC,IAEG,CAAEA,QAAOC,SAAQH,QAAOC,SAAQ9B,QAAOD,YDtBY0M,GAAlD5K,EADoB,EACpBA,MAAOE,EADa,EACbA,MAAOC,EADM,EACNA,OAAQF,EADF,EACEA,OAAQ9B,EADV,EACUA,MAAOD,EADjB,EACiBA,SACvCkC,IAAoBJ,EACpB6K,EERiB,SAACzK,EAAiBH,GACzC,OAAIG,EACM,kBAAC,IAAD,KACN,kBAAC,IAAD,CAAOmG,KAAK,SACV,kBAAC,EAAD,OAGF,kBAAC,IAAD,CAAOA,KAAM,IAAMtG,EAAS,cAC1B,kBAAC,EAAD,OAGF,kBAAC,IAAD,CAAOsG,KAAK,UACV,kBAAC,EAAD,OAGF,kBAAC,IAAD,CAAU9G,GAAI,IAAMQ,EAAS,gBAIzB,kBAAC,IAAD,KAEN,kBAAC,IAAD,CAAOsG,KAAK,WACV,kBAAC,EAAD,OAGF,kBAAC,IAAD,CAAOA,KAAK,WACV,kBAAC,EAAD,OAGF,kBAAC,IAAD,CAAOA,KAAK,KACV,kBAAC,EAAD,OAGF,kBAAC,IAAD,CAAU9G,GAAG,OFzBAqL,CAAU1K,EAAiBH,GACpCyB,EAAWC,cAoBjB,OAlBApD,qBAAU,WACR,IAAI8C,EAAQb,IAAYC,MAAM5C,OAAO6C,SAASC,QAC1CU,EAAMrB,OACRE,EAAMmB,EAAMrB,MAAOqB,EAAMjC,GAAIiC,EAAMlD,MAAOkD,EAAMnD,aAIpDK,qBAAU,WACJ6B,GAAmBH,GACrB4B,IAAM4G,IAAI,cAAgBxI,EAAS,cAClCgC,MAAK,SAAAC,GACJR,EAAST,EAAgBiB,EAAI5E,UAE9BoL,OAAM,SAAAqC,GAAG,OAAI9C,QAAQC,IAAI6C,SAM5B,kBAACjL,EAAYkL,SAAb,CAAsBnM,MAAO,CAC3BmB,QAAOE,QAAOC,SAAQF,SAAQG,kBAAiBjC,QAAOD,aAEtD,kBAAC,IAAD,KACE,kBAAC,EAAD,CAAQkC,gBAAiBA,EAAiBjC,MAAOA,EAAOD,SAAUA,EAAU+B,OAAQA,IACpF,yBAAKlB,UAAU,aACZ8L,ODYP,OAEFjH,SAASqH,eAAe,W","file":"static/js/main.09d02fd4.chunk.js","sourcesContent":["import {useState, useCallback} from 'react';\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(null)\r\n\r\n  const request = useCallback(\r\n    async (url, method = 'GET', body = 'null', headers = {}) => {\r\n    setLoading(true)\r\n    try {\r\n      if (body) {\r\n        body = JSON.stringify(body)\r\n        headers['Content-Type'] = 'application/json'\r\n      }\r\n\r\n      const response = await fetch(url, {method, body, headers})\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || 'something went wrong')\r\n      }\r\n\r\n      setLoading(false)\r\n\r\n      return data\r\n    } catch (e) {\r\n      setLoading(false)\r\n      setError(e.message)\r\n      throw e\r\n    }\r\n  }, [])\r\n\r\n  const clearError = useCallback(() => setError(null), [])\r\n\r\n  return { loading, request, error, clearError }\r\n}\r\n","import { useCallback } from 'react';\r\n\r\nexport const useMessage = () => {\r\n  return useCallback(text => {\r\n    if (window.M && text) {\r\n      window.M.toast({ html: text })\r\n    }\r\n  }, [])\r\n}\r\n","import React, {useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {useHttp} from '../hooks/http.hook';\r\nimport {useMessage} from '../hooks/message.hook';\r\n\r\n\r\nexport const RegistrationPage = () => {\r\n  const message = useMessage()\r\n  const {loading, request, error, clearError} = useHttp()\r\n  const [form, setForm] = useState({\r\n    username: '', email: '', password: ''\r\n  })\r\n\r\n  useEffect(() => {\r\n    message(error)\r\n    clearError()\r\n  }, [error, message, clearError])\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, [])\r\n\r\n  const changeHandler = event => {\r\n    setForm({ ...form, [event.target.name]: event.target.value })\r\n  }\r\n\r\n  const registerHandler = async () => {\r\n    try {\r\n      const data = await request('/api/auth/register', 'POST', {...form})\r\n      message(data.message)\r\n    } catch (e) {}\r\n  }\r\n\r\n  return (\r\n    <div className='row' style={{ marginBottom: '0' }}>\r\n      <div className=\"col s10 m6 offset-s1 offset-m3\" style={{ textAlign: 'center', marginTop: '2em' }}>\r\n        <div className=\"card\">\r\n          <div className=\"card-content\">\r\n            <span className=\"card-title\">\r\n              <h5>Sign Up</h5>\r\n            </span>\r\n            <div>\r\n\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">account_circle</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"username\"\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"username\">Username</label>\r\n              </div>\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">email</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"email\"\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"email\">Email</label>\r\n              </div>\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">lock</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"password\">Password</label>\r\n                <div style={{paddingTop: '1.5em'}}>\r\n                  <Link to=\"/signin\" className=\"pink-text\">Sign In</Link>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          <div className=\"card-action\">\r\n            <button\r\n              className=\"btn pink darken-2\"\r\n              style={{marginRight: '10px'}}\r\n              onClick={registerHandler}\r\n              disabled={loading}\r\n            >\r\n              Sign Up\r\n            </button>\r\n            {/* <button\r\n              className=\"btn pink lighten-3\"\r\n              onClick={registerHandler}\r\n              disabled={loading}\r\n            >\r\n              Register\r\n            </button> */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import {createContext} from 'react';\r\n\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n  token: null,\r\n  userId: null,\r\n  email: null,\r\n  username: null,\r\n  login: noop,\r\n  logout: noop,\r\n  isAuthenticated: false\r\n})\r\n","import React, {useState, useEffect, useContext} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useHttp } from '../hooks/http.hook';\r\nimport { useMessage } from '../hooks/message.hook';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport queryString from \"query-string\";\r\n\r\n\r\nexport const AuthPage = () => {\r\n  const auth = useContext(AuthContext)\r\n\r\n  const message = useMessage()\r\n  const {loading, request, error, clearError} = useHttp()\r\n  const [form, setForm] = useState({\r\n    email: '', password: ''\r\n  })\r\n\r\n  useEffect(() => {\r\n    let query = queryString.parse(window.location.search);\r\n    if (query.status === 'Blocked') {\r\n      message('Пользователь заблокирован')\r\n      clearError()\r\n      setTimeout(() => window.location.replace('/signin'), 2500)\r\n    }\r\n\r\n    message(error)\r\n    clearError()\r\n  }, [error, message, clearError])\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, [])\r\n\r\n  const changeHandler = event => {\r\n    setForm({ ...form, [event.target.name]: event.target.value })\r\n  }\r\n\r\n  const loginHandler = async () => {\r\n    try {\r\n      const data = await request('/api/auth/login', 'POST', {...form})\r\n      auth.login(data.token, data.userId, data.email, data.username)\r\n    } catch (e) {}\r\n  }\r\n\r\n\r\n  return (\r\n    <div className='row' style={{ marginBottom: '0' }}>\r\n      <div className=\"col s10 m6 offset-s1 offset-m3\" style={{ textAlign: 'center', marginTop: '2em' }}>\r\n        <div className=\"card\">\r\n          <div className=\"card-content\">\r\n            <span className=\"card-title\">\r\n              <h5>Sign In</h5>\r\n            </span>\r\n            <div>\r\n\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">email</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"email\"\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"email\">Email</label>\r\n              </div>\r\n              <div className=\"input-field\">\r\n                <i className=\"material-icons prefix\">lock</i>\r\n                <input\r\n                  className=\"pink-input\"\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"password\">Password</label>\r\n\r\n                <div style={{paddingTop: '1.5em'}}>\r\n                  <a href=\"/api/auth/google\" className=\"waves-effect waves-light btn deep-orange accent-4\">Sign in with Google</a>\r\n                </div>\r\n                <div style={{paddingTop: '.5em'}}>\r\n                  <a href=\"/api/auth/spotify\" className=\"waves-effect waves-light btn green accent-4\">Sign in with Spotify</a>\r\n                </div>\r\n                <p style={{paddingTop: '1.5em'}}>\r\n                  Don't have an account?\r\n                </p>\r\n                <div>\r\n                  <Link to=\"/signup\" className=\"pink-text\">Sign Up</Link>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          <div className=\"card-action\">\r\n            <button\r\n              className=\"btn pink darken-2\"\r\n              style={{marginRight: '10px'}}\r\n              onClick={loginHandler}\r\n              disabled={loading}\r\n            >\r\n              Sign In\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export const updatePlaylists = (playlists) => {\r\n  return {\r\n    type: 'UPDATE_PLAYLISTS',\r\n    payload: playlists\r\n  }\r\n}\r\n\r\nexport const updateQuery = (query) => {\r\n  return {\r\n    type: 'UPDATE_QUERY',\r\n    payload: query\r\n  }\r\n}\r\n// export const addAlbum = (playlist) => {\r\n//   return {\r\n//     type: 'ADD',\r\n//     payload: playlist\r\n//   }\r\n// }\r\n//\r\n// export const removeAlbum = (playlist) => {\r\n//   return {\r\n//     type: 'REMOVE',\r\n//     payload: playlist\r\n//   }\r\n// }\r\n","import React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport { useDispatch } from 'react-redux';\r\nimport { updatePlaylists } from '../actions';\r\n\r\n\r\nexport const CreatePlaylist = ({album}) => {\r\n  const [playlistName, setPlaylistName] = useState()\r\n  const dispatch = useDispatch()\r\n\r\n  const changeHandler = e => {\r\n    setPlaylistName(e.target.value)\r\n  }\r\n\r\n  const createPlaylist = () => {\r\n    axios.post('/api/users/' + JSON.parse(localStorage.getItem('userData')).userId + '/playlists/create/', {playlistName, album})\r\n    .then(res => dispatch(updatePlaylists(res.data)))\r\n  }\r\n\r\n  return (<div>\r\n    <div id=\"modal1\" className=\"modal\">\r\n      <div className=\"modal-content\">\r\n        <input name=\"playlistName\" className=\"pink-input\" type=\"text\" onChange={changeHandler}/>\r\n      </div>\r\n      <div className=\"modal-footer\">\r\n        <button className=\"btn pink darken-2 modal-close\" onClick={createPlaylist}>\r\n          OK\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>)\r\n};\r\n","import React from 'react';\r\n\r\nexport const Spinner = () => {\r\n  return (\r\n    <div className=\"center-align\" style={{ marginTop: '12em' }}>\r\n      <div className=\"preloader-wrapper big active\">\r\n        <div className=\"spinner-layer\" style={{ borderColor: \"#E91E63\" }}>\r\n          <div className=\"circle-clipper left\">\r\n            <div className=\"circle\"></div>\r\n          </div><div className=\"gap-patch\">\r\n            <div className=\"circle\"></div>\r\n          </div><div className=\"circle-clipper right\">\r\n            <div className=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","import React, {useState, useEffect} from 'react';\r\nimport {CreatePlaylist} from './CreatePlaylist';\r\nimport {Spinner} from './Spinner';\r\nimport M from 'materialize-css';\r\nimport axios from 'axios';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {updatePlaylists} from '../actions';\r\n\r\nconst userName = 'cemetary_party',\r\n  apiKey = '52c7f1e1257548e0650675e63ead469c';\r\n\r\nexport const AlbumsList = () => {\r\n  const searchQuery = useSelector(state => state.query)\r\n  const playlistsNames = useSelector(state => Object.keys(state.playlists))\r\n  const dispatch = useDispatch()\r\n  const [albums, setAlbums] = useState([])\r\n  const [currentAlbum, setCurrentAlbum] = useState()\r\n\r\n  useEffect(() => {\r\n    if (searchQuery.length) {\r\n      fetch(`https://ws.audioscrobbler.com/2.0/?method=album.search&album=${searchQuery}&api_key=${apiKey}&limit=10&format=json`).then(res => res.json()).then(data => {\r\n        let lastFmAlbums = data.results.albummatches.album;\r\n        setAlbums(lastFmAlbums)\r\n      })\r\n    } else {\r\n      fetch(`https://ws.audioscrobbler.com/2.0/?method=user.gettopalbums&user=${userName}&api_key=${apiKey}&period=6month&format=json`).then(res => res.json()).then(data => {\r\n        let lastFmAlbums = data.topalbums?.album;\r\n        setAlbums(lastFmAlbums.filter((album, index, self) => {\r\n          return index === self.indexOf(album);\r\n        }))\r\n      })\r\n    }\r\n  }, [searchQuery]);\r\n\r\n  useEffect(() => {\r\n    M.Dropdown.init(document.querySelectorAll('.dropdown-trigger'), {constrainWidth: false});\r\n    M.Modal.init(document.querySelectorAll('.modal'), {endingTop: \"30%\"});\r\n  })\r\n\r\n  const addToPlaylist = (playlistName) => {\r\n    axios.post('/api/users/' + JSON.parse(localStorage.getItem('userData')).userId + '/playlists/' + playlistName + '/update/', {playlistName, currentAlbum}).then(response => {\r\n      dispatch(updatePlaylists(response.data))\r\n    })\r\n  }\r\n\r\n  return albums.length\r\n    ? (<div className='items-wrapper'>\r\n      {\r\n        albums.map(album => {\r\n          return album.image[0]['#text'] && (\r\n            <div className=\"card album-card\" key={album.url}>\r\n              <div className=\"card-image\">\r\n                <img src={album.image[2]['#text']} alt=\"\" onMouseEnter={() => {\r\n                    setCurrentAlbum(album)\r\n                  }}/>\r\n              </div>\r\n              <div className=\"card-content\">\r\n                <h5>{album.artist.name || album.artist}</h5>\r\n                <p>{album.name}</p>\r\n              </div>\r\n              {\r\n                localStorage.getItem('userData') && <div>\r\n                    <div data-target='dropdown1' className=\"dropdown-trigger album-button material-icons\"></div>\r\n\r\n                    <ul id='dropdown1' className='dropdown-content'>\r\n                      {\r\n                        playlistsNames.map(playlistName => <li key={playlistName}>\r\n                          <a onClick={(e) => {\r\n                              e.preventDefault()\r\n                              addToPlaylist(playlistName)\r\n                            }} href=\"#!\">{playlistName}</a>\r\n                        </li>)\r\n                      }\r\n                      <li className=\"divider\" tabIndex=\"-1\"></li>\r\n                      <li>\r\n                        <a className=\"modal-trigger\" href=\"#modal1\">\r\n                          <i className=\"material-icons\">add</i>new playlist</a>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n              }\r\n            </div>\r\n          )\r\n        })\r\n      }\r\n      <CreatePlaylist album={currentAlbum}/>\r\n    </div>)\r\n    : <Spinner/>\r\n};\r\n","import React from 'react';\r\nimport { AlbumsList } from '../components/AlbumsList';\r\n\r\n\r\nexport const HomePage = () => {\r\n  return (\r\n    <div>\r\n      <AlbumsList />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport TextTruncate from 'react-text-truncate';\r\nimport axios from 'axios';\r\nimport { useDispatch } from 'react-redux';\r\nimport { updatePlaylists } from '../actions';\r\n\r\n\r\nexport const PlaylistCard = ({ albums, playlistName }) => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const [imageUrls, setImageUrls] = useState(\"\")\r\n  const [artists, setArtists] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    setArtists(\r\n      albums.map(album => album.artist.name || album.artist).join(\", \")\r\n    )\r\n\r\n    if (albums.length < 4) {\r\n      setImageUrls(`url(${albums[0].image[2]['#text']})`)\r\n    } else {\r\n      setImageUrls(`url(${albums[0].image[2]['#text']}) left top no-repeat, url(${albums[1].image[2]['#text']}) right top no-repeat, url(${albums[2].image[2]['#text']}) left bottom no-repeat, url(${albums[3].image[2]['#text']}) right bottom no-repeat`)\r\n    }\r\n  }, [albums])\r\n\r\n  const styles = {\r\n    \"playlistCover\": {\r\n      height: \"20em\",\r\n      background: `${imageUrls}`\r\n    }\r\n  }\r\n\r\n  const deletePlaylist = (e) => {\r\n    e.stopPropagation()\r\n    axios.post('/api/users/' + JSON.parse(localStorage.getItem('userData')).userId + '/playlists/' + playlistName + '/delete/').then(response => {\r\n      dispatch(updatePlaylists(response.data))\r\n    })\r\n  }\r\n\r\n  const openPlaylist = () => window.location.href += `/${playlistName}`\r\n\r\n  return albums && (\r\n    <div className=\"card playlist-card\">\r\n      <div className=\"card-image\" onClick={openPlaylist}>\r\n        {\r\n          albums.length > 3\r\n            ? <div className=\"playlist-cover\" style={styles.playlistCover}></div>\r\n            : <img src={albums[albums.length - 1].image[2]['#text']} alt=\"\"/>\r\n        }\r\n        <span className=\"card-title playlist-title\">\r\n          {playlistName}\r\n          <span className=\"playlist-actions\">\r\n            {/* <i className=\"edit-playlist material-icons\">edit</i> */}\r\n            <i className=\"delete-playlist material-icons\" onClick={deletePlaylist}>delete</i>\r\n          </span>\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"card-content\">\r\n        <TextTruncate line={2} element=\"p\" truncateText=\"…\" text={artists}/>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","import React from 'react';\r\nimport { Spinner } from './Spinner';\r\nimport { PlaylistCard } from './PlaylistCard';\r\nimport { useSelector } from 'react-redux';\r\n\r\n\r\nexport const Playlists = () => {\r\n  const playlists = useSelector(state => state.playlists)\r\n\r\n  if (!playlists) {\r\n    return <h5 style={{ textAlign: \"center\", marginTop: \"4em\"}}>Nothing here yet<span role=\"img\" aria-label=\"rat\">🐀</span></h5>\r\n  } else if (!Object.keys(playlists).length) {\r\n    return <Spinner/>\r\n  }\r\n\r\n  return (\r\n    <div className=\"items-wrapper\">\r\n      {\r\n    Object.keys(playlists).map(name => <PlaylistCard key={name} albums={playlists[name]} playlistName={name} />)\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { Spinner } from './Spinner';\r\nimport axios from 'axios';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updatePlaylists } from '../actions';\r\n\r\n\r\nexport const Playlist = (props) => {\r\n  const dispatch = useDispatch()\r\n  const albums = useSelector(state => state.playlists[props.match.params.playlistName])\r\n\r\n  const deleteFromPlaylist = (albumName, playlistName) => {\r\n    axios.post('/api/users/' + JSON.parse(localStorage.getItem('userData')).userId + '/playlists/' + playlistName + '/deleteAlbum/', [playlistName, albumName]).then(response => {\r\n      dispatch(updatePlaylists(response.data))\r\n    })\r\n  }\r\n\r\n  const renderAlbums = (albums, playlistName) => albums.map(album => {\r\n    return (<div className=\"card album-card\" key={album.name}>\r\n      <div className=\"card-image\">\r\n        <img src={album.image[2]['#text']} alt=\"\"/>\r\n      </div>\r\n      <div className=\"card-content\">\r\n        <h5>{album.artist.name || album.name}</h5>\r\n        <p>{album.name}</p>\r\n      </div>\r\n      <div className=\"album-button material-icons added\" onClick={() => deleteFromPlaylist(album.name, playlistName)}></div>\r\n    </div>)\r\n  })\r\n\r\n  if (!albums) {\r\n    return <Spinner/>\r\n  }\r\n\r\n  return (<ul className=\"collection\">\r\n    <li className=\"collection-item active\">\r\n      <button className=\"btn-floating btn-flat grey darken-4\"><i className=\"material-icons\" onClick={() => window.location.href = `/${props.match.params.id}/playlists`}>keyboard_arrow_left</i></button>\r\n      <h5>{props.match.params.playlistName}</h5>\r\n    </li>\r\n\r\n    <li className=\"collection-item\">\r\n      <div className=\"items-wrapper\">\r\n        {renderAlbums(albums, props.match.params.playlistName)}\r\n      </div>\r\n    </li>\r\n  </ul>)\r\n}\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { Playlists } from '../components/Playlists';\r\nimport { Playlist } from '../components/Playlist';\r\n\r\n\r\nexport const PlaylistsPage = () => {\r\n  return (\r\n  <div className=\"row\" style={{ marginTop: \"1.5em\" }}>\r\n    <Switch>\r\n      <Route exact path='/:id/playlists'>\r\n      <h4>Playlists</h4>\r\n        <Playlists />\r\n      </Route>\r\n\r\n      <Route path='/:id/playlists/:playlistName' component={Playlist} />\r\n    </Switch>\r\n  </div>\r\n  )\r\n}\r\n","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\n\r\nexport class UsersPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      allChecked: false,\r\n      users: []\r\n     };\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    axios.get('/api/users')\r\n      .then(response => {\r\n        this.setState({\r\n          users: response.data.map(user => ({ ...user, isChecked: false }))\r\n        })\r\n      })\r\n      .catch((error) => { console.log(error) })\r\n  }\r\n\r\n  renderList = () => {\r\n    return this.state.users.map(currentUser => (\r\n      <tr\r\n        key={currentUser._id}\r\n        onClick={(e) => {\r\n          let id = currentUser._id;\r\n\r\n          this.setState(prevState => {\r\n            let { users, allChecked } = prevState;\r\n              users = users.map(user =>\r\n                user._id === id ? { ...user, isChecked: !user.isChecked } : user\r\n              );\r\n              allChecked = users.every(user => user.isChecked);\r\n              return { users, allChecked };\r\n            })\r\n          }\r\n        }\r\n        className={this.state.users.find(user => user._id === currentUser._id).isChecked ? 'checked' : undefined}\r\n      >\r\n        <td>\r\n\r\n          <label>\r\n            <input\r\n              type=\"checkbox\"\r\n              key={currentUser._id}\r\n              name={currentUser.username}\r\n              value={currentUser.username}\r\n              checked={currentUser.isChecked}\r\n              onChange={this.handleClick}\r\n              className=\"filled-in\"\r\n            />\r\n            <span></span>\r\n          </label>\r\n\r\n        </td>\r\n\r\n        <td>{currentUser.username}</td>\r\n        <td>{currentUser.email}</td>\r\n        <td>{currentUser._id}</td>\r\n        <td>{new Date(currentUser.registrationDate).toLocaleString()}</td>\r\n        <td>{new Date(currentUser.lastLoginDate).toLocaleString()}</td>\r\n        <td style={{width: '70px'}} className={currentUser.status}>{currentUser.status}</td>\r\n\r\n      </tr>\r\n    ));\r\n  };\r\n\r\n  handleClick = (e) => {\r\n    let itemName = e.target.name;\r\n    let checked = e.target.checked;\r\n\r\n    this.setState(prevState => {\r\n      let { users, allChecked } = prevState;\r\n      if (itemName === \"checkAll\") {\r\n        allChecked = checked;\r\n        users = users.map(user => ({ ...user, isChecked: checked }));\r\n      } else {\r\n        users = users.map(user =>\r\n          user.username === itemName ? { ...user, isChecked: !user.isChecked } : user\r\n        );\r\n        allChecked = users.every(user => user.isChecked);\r\n      }\r\n      return { users, allChecked };\r\n    });\r\n  };\r\n\r\n  deleteUser = () => {\r\n    let checked = this.state.users.filter(user => user.isChecked)\r\n    checked.forEach(user => {\r\n      axios.delete('/api/users/' + user._id)\r\n        .then(response => { console.log(response.data)})\r\n        .then(() => {\r\n          this.setState(prevState => {\r\n             return { users: prevState.users.filter(x => x._id !== user._id) }\r\n          })\r\n          if (JSON.parse(localStorage.getItem('userData')).userId === user._id) {\r\n            localStorage.removeItem('userData');\r\n            window.location.reload();\r\n          }\r\n        })\r\n    })\r\n  }\r\n\r\n  blockUser = () => {\r\n    let checked = this.state.users.filter(user => user.isChecked);\r\n    checked.forEach(user => {\r\n      user.status = 'Blocked'\r\n      this.setState(prevState => {\r\n        return { users: prevState.users.map(x => ({ ...x, user })) }\r\n      })\r\n      axios.post('/api/users/' + user._id + '/update/', user).then(res => console.log(res.data))\r\n    });\r\n\r\n    if (checked.some(user => JSON.parse(localStorage.getItem('userData')).userId === user._id)) {\r\n      localStorage.removeItem('userData');\r\n      window.location.reload();\r\n    }\r\n  }\r\n\r\n  unblockUser = () => {\r\n    let checked = this.state.users.filter(user => user.isChecked);\r\n    checked.forEach(user => {\r\n      user.status = 'Active'\r\n      this.setState(prevState => {\r\n        return { users: prevState.users.map(x => ({ ...x, user })) }\r\n      })\r\n      axios.post('/api/users/' + user._id + '/update/', user).then(res => console.log(res.data))\r\n    });\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h4>Users</h4>\r\n        <table className=\"table\">\r\n          <thead className=\"thead-light\">\r\n            <tr>\r\n              <th>\r\n                <label htmlFor=\"checkAll\">\r\n                  <input\r\n                    id=\"checkAll\"\r\n                    name=\"checkAll\"\r\n                    type=\"checkbox\"\r\n                    className=\"filled-in\"\r\n                    onChange={this.handleClick}\r\n                    checked={this.state.allChecked}\r\n                  />\r\n                  <span></span>\r\n                </label>\r\n              </th>\r\n              <th>Username</th>\r\n              <th>Email</th>\r\n              <th>ID</th>\r\n              <th>Registration Date</th>\r\n              <th>Last Login Date</th>\r\n              <th>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            { this.renderList() }\r\n          </tbody>\r\n        </table>\r\n\r\n        <p>\r\n            <button\r\n              onClick={this.deleteUser}\r\n              className=\"btn pink darken-2 waves-effect waves-light\"\r\n            >\r\n                Delete\r\n               <i className=\"material-icons-outlined right\">delete</i>\r\n            </button>\r\n            <button\r\n              onClick={this.blockUser}\r\n              className=\"btn pink darken-2 waves-effect waves-light\"\r\n              style={{\r\n                  marginLeft: '1em',\r\n                  marginRight: '1em'\r\n              }}\r\n            >\r\n                Block\r\n               <i className=\"material-icons-outlined right\">lock</i>\r\n            </button>\r\n            <button\r\n              onClick={this.unblockUser}\r\n              className=\"btn pink darken-2 waves-effect waves-light\"\r\n            >\r\n                Unblock\r\n               <i className=\"material-icons right\">lock_open</i>\r\n            </button>\r\n        </p>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { useEffect, useContext } from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport M from \"materialize-css/dist/js/materialize.min.js\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { updateQuery } from '../actions';\r\n\r\n\r\nexport const Navbar = ({ isAuthenticated, email, username, userId }) => {\r\n  const history = useHistory()\r\n  const dispatch = useDispatch()\r\n  const auth = useContext(AuthContext)\r\n\r\n  const logoutHandler = (event) => {\r\n    event.preventDefault()\r\n    auth.logout()\r\n    history.push('/')\r\n  }\r\n\r\n  const search = (e) => {\r\n    history.push('/home')\r\n    dispatch(updateQuery(e.target.value))\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    const sidenav = document.querySelector(\".sidenav\");\r\n    M.Sidenav.init(sidenav, {\r\n        edge: \"left\",\r\n        inDuration: 250,\r\n    });\r\n    const autocomplete = document.querySelector(\".autocomplete\");\r\n    M.Autocomplete.init(autocomplete, {\r\n      data: {},\r\n    });\r\n  })\r\n\r\n  return isAuthenticated ? (\r\n    <div>\r\n      <div className=\"navbar-fixed\">\r\n        <nav className=\"grey darken-4\">\r\n          <div className=\"container nav-wrapper\">\r\n            <NavLink to=\"#\" data-target=\"slide-out\" className=\"sidenav-trigger show-on-large\"><i className=\"material-icons\">menu</i></NavLink>\r\n            <NavLink to='/home' className=\"brand-logo left hide-on-small-only\" onClick={() => dispatch(updateQuery(\"\"))}>\r\n            MusicSearcher\r\n          </NavLink>\r\n              <ul id=\"nav-mobile\" className=\"right\">\r\n                <li className=\"search\">\r\n                  <div className=\"input-field\">\r\n                      <i className=\"material-icons prefix\">search</i>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"autocomplete-input\" className=\"autocomplete\"\r\n                        onChange={search}\r\n                      />\r\n                  </div>\r\n                </li>\r\n                <li>\r\n                  <NavLink to='/' onClick={logoutHandler}><i className=\"material-icons right hide-on-small-only\">logout</i></NavLink>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n        </nav>\r\n      </div>\r\n\r\n      <ul id=\"slide-out\" className=\"sidenav\">\r\n        <li><div className=\"user-view center-align\">\r\n          <div className=\"background\">\r\n            <img alt=\"\" src=\"https://img.discogs.com/XOPpJ3wQribJGdk-rb4-yAfiBtM=/fit-in/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-2821873-1445885288-1628.jpeg.jpg\" />\r\n          </div>\r\n          <img alt=\"\" className=\"circle\" style={{\r\n             position: 'relative',\r\n             left: '50%',\r\n             marginLeft: '-25px'\r\n          }} src=\"https://sun9-50.userapi.com/c850024/v850024986/c3654/Sd5DUQOKadU.jpg\" />\r\n          <span className=\"white-text name\">{username}</span>\r\n          <span className=\"white-text email\">{email}</span>\r\n        </div></li>\r\n        <li>\r\n          <NavLink to='/home'>\r\n            <i className=\"material-icons\">home</i>\r\n            Home\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to={\"/\" + userId + \"/playlists\"}>\r\n          <i className=\"material-icons\">library_music</i>\r\n            My Playlists\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to='/users'>\r\n          <i className=\"material-icons\">people</i>\r\n            Users\r\n          </NavLink>\r\n        </li>\r\n        <li><div className=\"divider\"></div></li>\r\n        <li>\r\n          <NavLink to='/' className=\"sidenav-close\" onClick={logoutHandler}>\r\n          <i className=\"material-icons\">logout</i>\r\n            Logout\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n\r\n    </div>\r\n  ) : (\r\n    <div className=\"navbar-fixed\">\r\n      <nav className=\"grey darken-4\">\r\n        <div className=\"container nav-wrapper\">\r\n          <NavLink to='/' className=\"brand-logo left\">\r\n          MusicSearcher\r\n        </NavLink>\r\n            <ul id=\"nav-mobile\" className=\"right\">\r\n              <li>\r\n                <NavLink to='/signin'>Sign In</NavLink>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n","const updatePlaylistsReducer = (state = {}, action) => {\r\n    switch (action.type) {\r\n      // case 'ADD':\r\n      // return [...state, action.payload]\r\n      case 'UPDATE_PLAYLISTS':\r\n      // return state.filter(x => x.name !== action.payload.name)\r\n        return action.payload\r\n      default:\r\n        return state;\r\n  }\r\n}\r\n\r\nexport default updatePlaylistsReducer;\r\n","const updateQueryReducer = (state = \"\", action) => {\r\n    switch (action.type) {\r\n      case 'UPDATE_QUERY':\r\n        return action.payload\r\n      default:\r\n        return state;\r\n  }\r\n}\r\n\r\nexport default updateQueryReducer;\r\n","import updatePlaylistsReducer from './updatePlaylistsReducer'\r\nimport updateQueryReducer from './updateQueryReducer'\r\nimport { combineReducers } from 'redux'\r\n\r\nexport default combineReducers({\r\n  playlists: updatePlaylistsReducer,\r\n  query: updateQueryReducer\r\n})\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n// import axios from 'axios';\r\n\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\n// import { updatePlaylists } from './actions';\r\nimport allReducer from './reducers/index';\r\n\r\nimport \"materialize-css/dist/js/materialize.min.js\";\r\nimport \"materialize-css/dist/css/materialize.min.css\";\r\n\r\n\r\nconst store = createStore(\r\n  allReducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n)\r\n\r\n\r\n// //action\r\n// const increment = () => {\r\n//   return {\r\n//     type: 'INCREMENT'\r\n//   }\r\n// }\r\n//\r\n// const decrement = () => {\r\n//   return {\r\n//     type: 'DECREMENT'\r\n//   }\r\n// }\r\n//\r\n// //reducer\r\n// const counter = (state = 0, action) => {\r\n//     switch (action.type) {\r\n//       case 'INCREMENT':\r\n//         return state + 1;\r\n//       case 'DECREMENT':\r\n//         return state - 1;\r\n//   }\r\n// }\r\n//\r\n//\r\n// let store = createStore(counter)\r\n// //log\r\n// store.subscribe(() => console.log(store.getState()))\r\n//\r\n// //dispatch\r\n// store.dispatch(increment())\r\n// store.dispatch(decrement())\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","import React, { useEffect } from 'react';\r\nimport { BrowserRouter as Router} from 'react-router-dom';\r\nimport { useRoutes } from './routes';\r\nimport { useAuth } from './hooks/auth.hook';\r\nimport { AuthContext } from './context/AuthContext';\r\nimport 'materialize-css';\r\nimport { Navbar } from './components/Navbar';\r\nimport queryString from \"query-string\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { updatePlaylists } from './actions';\r\nimport axios from 'axios';\r\n\r\n\r\nexport default function App() {\r\n  const { token, login, logout, userId, email, username } = useAuth()\r\n  const isAuthenticated = !!token\r\n  const routes = useRoutes(isAuthenticated, userId)\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    let query = queryString.parse(window.location.search);\r\n    if (query.token) {\r\n      login(query.token, query.id, query.email, query.username)\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && userId) {\r\n      axios.get('/api/users/' + userId + '/playlists')\r\n      .then(res => {\r\n        dispatch(updatePlaylists(res.data))\r\n      })\r\n      .catch(err => console.log(err))\r\n    }\r\n  })\r\n\r\n\r\n  return (\r\n    <AuthContext.Provider value={{\r\n      token, login, logout, userId, isAuthenticated, email, username\r\n    }}>\r\n      <Router>\r\n        <Navbar isAuthenticated={isAuthenticated} email={email} username={username} userId={userId} />\r\n        <div className='container'>\r\n          {routes}\r\n        </div>\r\n      </Router>\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n","import {useState, useCallback, useEffect} from 'react';\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null)\r\n  const [userId, setUserId] = useState(null)\r\n  const [email, setEmail] = useState(null)\r\n  const [username, setUsername] = useState(null)\r\n\r\n  const login = useCallback((jwtToken, id, email, username) => {\r\n    setToken(jwtToken)\r\n    setUserId(id)\r\n    setEmail(email)\r\n    setUsername(username)\r\n\r\n    localStorage.setItem(storageName, JSON.stringify({\r\n      userId: id, token: jwtToken, email: email, username: username\r\n    }))\r\n  }, [])\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null)\r\n    setUserId(null)\r\n    setEmail(null)\r\n    setUsername(null)\r\n    localStorage.removeItem(storageName)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName))\r\n    if (data && data.token) {\r\n      login(data.token, data.userId, data.email, data.username)\r\n    }\r\n  }, [login])\r\n\r\n  return { login, logout, token, userId, email, username}\r\n}\r\n","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport { RegistrationPage } from './pages/RegistrationPage';\r\nimport { AuthPage } from './pages/AuthPage';\r\nimport { HomePage } from './pages/HomePage';\r\nimport { PlaylistsPage } from './pages/PlaylistsPage';\r\nimport { UsersPage } from './pages/UsersPage';\r\n\r\nexport const useRoutes = (isAuthenticated, userId) => {\r\n  if (isAuthenticated) {\r\n    return (<Switch>\r\n      <Route path=\"/home\">\r\n        <HomePage/>\r\n      </Route>\r\n\r\n      <Route path={\"/\" + userId + \"/playlists\"}>\r\n        <PlaylistsPage/>\r\n      </Route>\r\n\r\n      <Route path=\"/users\">\r\n        <UsersPage/>\r\n      </Route>\r\n\r\n      <Redirect to={\"/\" + userId + \"/playlists\"}/>\r\n\r\n    </Switch>);\r\n  }\r\n  return (<Switch>\r\n\r\n    <Route path=\"/signin\">\r\n      <AuthPage/>\r\n    </Route>\r\n\r\n    <Route path=\"/signup\">\r\n      <RegistrationPage/>\r\n    </Route>\r\n\r\n    <Route path=\"/\">\r\n      <HomePage/>\r\n    </Route>\r\n\r\n    <Redirect to=\"/\"/>\r\n\r\n  </Switch>);\r\n}\r\n"],"sourceRoot":""}