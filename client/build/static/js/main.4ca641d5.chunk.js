(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{38:function(e,t,a){e.exports=a(67)},43:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),c=a.n(l),s=(a(43),a(8)),i=a(10),o=a(9),u=a.n(o),m=a(12),d=a(13),p=a(3),f=a(6),h=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),c=Object(f.a)(l,2),s=c[0],i=c[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,l,c,s,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:"null",l=o.length>3&&void 0!==o[3]?o[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),l["Content-Type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:l});case 8:return c=e.sent,e.next=11,c.json();case 11:if(s=e.sent,c.ok){e.next=14;break}throw new Error(s.message||"smth went wrong");case 14:return r(!1),e.abrupt("return",s);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),i(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:s,clearError:Object(n.useCallback)((function(){return i(null)}),[])}},E=function(){return Object(n.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[])},b=function(){var e=E(),t=h(),a=t.loading,l=t.request,c=t.error,i=t.clearError,o=Object(n.useState)({username:"",email:"",password:""}),b=Object(f.a)(o,2),k=b[0],g=b[1];Object(n.useEffect)((function(){e(c),i()}),[c,e,i]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var v=function(e){g(Object(p.a)({},k,Object(d.a)({},e.target.name,e.target.value)))},w=function(){var t=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l("/api/auth/register","POST",Object(p.a)({},k));case 3:a=t.sent,e(a.message),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s10 m5 offset-s1 offset-m3",style:{textAlign:"center"}},r.a.createElement("h1",null,"Notes App"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},r.a.createElement("h5",null,"Sign Up")),r.a.createElement("div",null,r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"material-icons prefix"},"account_circle"),r.a.createElement("input",{className:"pink-input",id:"username",type:"text",name:"username",onChange:v}),r.a.createElement("label",{htmlFor:"username"},"Username")),r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"material-icons prefix"},"email"),r.a.createElement("input",{className:"pink-input",id:"email",type:"text",name:"email",onChange:v}),r.a.createElement("label",{htmlFor:"email"},"Email")),r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"material-icons prefix"},"lock"),r.a.createElement("input",{className:"pink-input",id:"password",type:"password",name:"password",onChange:v}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("div",{style:{paddingTop:"1.5em"}},r.a.createElement(s.b,{to:"/"},"Sign In"))))),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{className:"btn pink darken-2",style:{marginRight:"10px"},onClick:w,disabled:a},"Sign Up")))))};function k(){}var g=Object(n.createContext)({token:null,userId:null,login:k,logout:k,isAuthenticated:!1}),v=function(){var e=Object(n.useContext)(g),t=E(),a=h(),l=a.loading,c=a.request,i=a.error,o=a.clearError,b=Object(n.useState)({email:"",password:""}),k=Object(f.a)(b,2),v=k[0],w=k[1];Object(n.useEffect)((function(){t(i),o()}),[i,t,o]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var N=function(e){w(Object(p.a)({},v,Object(d.a)({},e.target.name,e.target.value)))},O=function(){var t=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c("/api/auth/login","POST",Object(p.a)({},v));case 3:a=t.sent,e.login(a.token,a.userId),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s10 m5 offset-s1 offset-m3",style:{textAlign:"center"}},r.a.createElement("h1",null,"Notes App"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},r.a.createElement("h5",null,"Sign In")),r.a.createElement("div",null,r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"material-icons prefix"},"email"),r.a.createElement("input",{className:"pink-input",id:"email",type:"text",name:"email",onChange:N}),r.a.createElement("label",{htmlFor:"email"},"Email")),r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"material-icons prefix"},"lock"),r.a.createElement("input",{className:"pink-input",id:"password",type:"password",name:"password",onChange:N}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("p",{style:{paddingTop:"1.5em"}},"Don't have an account?"),r.a.createElement("div",null,r.a.createElement(s.b,{to:"/signup"},"Sign Up"))))),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{className:"btn pink darken-2",style:{marginRight:"10px"},onClick:O,disabled:l},"Sign In")))))},w=a(33),N=a(34),O=a(36),j=a(35),C=a(37),x=a(15),S=a.n(x),y=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).renderList=function(){return a.state.users.map((function(e){return r.a.createElement("tr",{key:e._id,onClick:function(t){var n=e._id;a.setState((function(e){var t=e.users,a=e.allChecked;return a=(t=t.map((function(e){return e._id===n?Object(p.a)({},e,{isChecked:!e.isChecked}):e}))).every((function(e){return e.isChecked})),{users:t,allChecked:a}}))},className:a.state.users.find((function(t){return t._id===e._id})).isChecked?"checked":void 0},r.a.createElement("td",null,r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",key:e._id,name:e.username,value:e.username,checked:e.isChecked,onChange:a.handleClick,className:"filled-in"}),r.a.createElement("span",null))),r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e._id),r.a.createElement("td",null,new Date(e.registrationDate).toLocaleString()),r.a.createElement("td",null,new Date(e.lastLoginDate).toLocaleString()),r.a.createElement("td",{style:{width:"70px"},className:e.status},e.status))}))},a.handleClick=function(e){var t=e.target.name,n=e.target.checked;a.setState((function(e){var a=e.users,r=e.allChecked;return"checkAll"===t?(r=n,a=a.map((function(e){return Object(p.a)({},e,{isChecked:n})}))):r=(a=a.map((function(e){return e.username===t?Object(p.a)({},e,{isChecked:!e.isChecked}):e}))).every((function(e){return e.isChecked})),{users:a,allChecked:r}}))},a.deleteUser=function(){a.state.users.filter((function(e){return e.isChecked})).forEach((function(e){S.a.delete("/api/users/"+e._id).then((function(e){console.log(e.data)})).then((function(){a.setState((function(t){return{users:t.users.filter((function(t){return t._id!==e._id}))}})),JSON.parse(localStorage.getItem("userData")).userId===e._id&&(localStorage.removeItem("userData"),window.location.reload())}))}))},a.blockUser=function(){var e=a.state.users.filter((function(e){return e.isChecked}));e.forEach((function(e){e.status="Blocked",a.setState((function(t){return{users:t.users.map((function(t){return Object(p.a)({},t,{user:e})}))}})),S.a.post("/api/users/"+e._id+"/update/",e).then((function(e){return console.log(e.data)}))})),e.some((function(e){return JSON.parse(localStorage.getItem("userData")).userId===e._id}))&&(localStorage.removeItem("userData"),window.location.reload())},a.unblockUser=function(){a.state.users.filter((function(e){return e.isChecked})).forEach((function(e){e.status="Active",a.setState((function(t){return{users:t.users.map((function(t){return Object(p.a)({},t,{user:e})}))}})),S.a.post("/api/users/"+e._id+"/update/",e).then((function(e){return console.log(e.data)}))}))},a.state={allChecked:!1,users:[]},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this;S.a.get("/api/users").then((function(t){e.setState({users:t.data.map((function(e){return Object(p.a)({},e,{isChecked:!1})}))})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Users"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("label",{htmlFor:"checkAll"},r.a.createElement("input",{id:"checkAll",name:"checkAll",type:"checkbox",className:"filled-in",onChange:this.handleClick,checked:this.state.allChecked}),r.a.createElement("span",null))),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Registration Date"),r.a.createElement("th",null,"Last Login Date"),r.a.createElement("th",null,"Status"))),r.a.createElement("tbody",null,this.renderList())),r.a.createElement("p",null,r.a.createElement("button",{onClick:this.deleteUser,className:"btn pink darken-2 waves-effect waves-light"},"Delete",r.a.createElement("i",{className:"material-icons-outlined right"},"delete")),r.a.createElement("button",{onClick:this.blockUser,className:"btn pink darken-2 waves-effect waves-light",style:{marginLeft:"1em",marginRight:"1em"}},"Block",r.a.createElement("i",{className:"material-icons-outlined right"},"lock")),r.a.createElement("button",{onClick:this.unblockUser,className:"btn pink darken-2 waves-effect waves-light"},"Unblock",r.a.createElement("i",{className:"material-icons right"},"lock_open"))))}}]),t}(n.Component),I=(a(66),function(){var e=Object(i.g)(),t=Object(n.useContext)(g);return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper pink darken-2"},r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"brand-logo"},"Notes App"),r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-small-and-down"},r.a.createElement("li",null,r.a.createElement(s.c,{to:"/users"},"Users")),r.a.createElement("li",null,r.a.createElement("a",{href:"/",onClick:function(a){a.preventDefault(),t.logout(),e.push("/")}},r.a.createElement("i",{className:"material-icons right"},"logout"))))))))});var D=function(){var e=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),c=Object(f.a)(l,2),s=c[0],i=c[1],o=Object(n.useCallback)((function(e,t){r(e),i(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),u=Object(n.useCallback)((function(){r(null),i(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&o(e.token,e.userId)}),[o]),{login:o,logout:u,token:a,userId:s}}(),t=e.token,a=e.login,l=e.logout,c=e.userId,o=!!t,u=function(e){return e?r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/users",exact:!0},r.a.createElement(y,null)),r.a.createElement(i.a,{to:"/users"})):r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0},r.a.createElement(v,null)),r.a.createElement(i.b,{path:"/signup",exact:!0},r.a.createElement(b,null)),r.a.createElement(i.a,{to:"/"}))}(o);return r.a.createElement(g.Provider,{value:{token:t,login:a,logout:l,userId:c,isAuthenticated:o}},r.a.createElement(s.a,null,o&&r.a.createElement(I,null),r.a.createElement("div",{className:"container"},u)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.4ca641d5.chunk.js.map